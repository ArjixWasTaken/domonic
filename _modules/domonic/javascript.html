
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>domonic.javascript &#8212; domonic 0.6.3 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for domonic.javascript</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    domonic.javascript</span>
<span class="sd">    ====================================</span>
<span class="sd">    - https://www.w3schools.com/jsref/jsref_reference.asp</span>
<span class="sd">    - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># from typing import *</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">urllib.parse</span>
<span class="kn">from</span> <span class="nn">dateutil.parser</span> <span class="kn">import</span> <span class="n">parse</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">unquote</span><span class="p">,</span> <span class="n">quote</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">signal</span>
<span class="kn">import</span> <span class="nn">typing</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">gc</span>
<span class="kn">import</span> <span class="nn">multiprocessing</span>
<span class="kn">from</span> <span class="nn">multiprocessing.pool</span> <span class="kn">import</span> <span class="n">ThreadPool</span> <span class="k">as</span> <span class="n">Pool</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">array</span>
<span class="kn">import</span> <span class="nn">struct</span>


<div class="viewcode-block" id="function"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.function">[docs]</a><span class="k">def</span> <span class="nf">function</span><span class="p">(</span><span class="n">python_str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;[evals a string i.e.</span>

<span class="sd">    sup = function(&#39;&#39;&#39;print(hi)&#39;&#39;&#39;)</span>
<span class="sd">    sup()</span>

<span class="sd">    ]</span>

<span class="sd">    Args:</span>
<span class="sd">        python_str ([str]): [some valid python code as a string]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">anon</span><span class="p">():</span>
        <span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="n">python_str</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">anon</span></div>


<span class="c1"># TODO - list all javascript keywords to python keywords</span>
<span class="n">true</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">false</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">null</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">undefined</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># globalThis # TODO - do i need to use inpect? or is globals() ok?</span>


<div class="viewcode-block" id="Boolean"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Boolean">[docs]</a><span class="k">class</span> <span class="nc">Boolean</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;[Creates a Boolean Object.</span>
<span class="sd">        Warning this is NOT a boolean type. for that use Global.Boolean()]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">Global</span><span class="o">.</span><span class="n">Boolean</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>


<span class="k">class</span> <span class="nc">Object</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Creates a Javascript-like Object in python]</span>

<span class="sd">        Args:</span>
<span class="sd">            obj ([type]): [pass an object, dict or callable to the contructor]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># print(&#39;object created!&#39;)</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">prototype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extensible</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__frozen</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__sealed</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># self.__dict__ = {}</span>
        <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">obj</span><span class="p">())</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
                <span class="c1"># self.__dict__[&#39;__class__&#39;] = obj.__class__.__name__</span>
                <span class="c1"># self.__dict__[&#39;__module__&#39;] = obj.__module__</span>
                <span class="c1"># self.__dict__[&#39;__doc__&#39;] = obj.__doc__</span>
                <span class="c1"># self.__dict__[&#39;__proto__&#39;] = obj</span>
                <span class="c1"># self.__dict__[&#39;__proto__&#39;].__class__ = Object</span>
                <span class="c1"># self.__dict__[&#39;__proto__&#39;].__dict__ = self.__dict__</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Object.__init__() failed to set attribs&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a string representation of the object &quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="k">if</span> <span class="s1">&#39;__&#39;</span> <span class="ow">in</span> <span class="n">k</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;prototype&#39;</span> <span class="ow">in</span> <span class="n">k</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

    <span class="c1"># def __repr__(self):</span>
    <span class="c1">#     &quot;&quot;&quot; Returns a string representation of the object.&quot;&quot;&quot;</span>
    <span class="c1">#     return self.toString()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">fromEntries</span><span class="p">(</span><span class="n">entries</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        transforms a list of lists containing key and value into an object.</span>
<span class="sd">        @param entries: a list containing key and value tuples. The key and value are separated by &#39;:&#39;</span>
<span class="sd">        @type entries: list of tuple(string, string)</span>
<span class="sd">        @returns: a dict object.</span>

<span class="sd">        &gt;&gt;&gt; fromEntries(entries)</span>
<span class="sd">        {&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">}</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">assign</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">source</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Copies the values of all enumerable own properties from one or more source objects to a target object. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">source</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">target</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">source</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">target</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">source</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">source</span><span class="o">.</span><span class="n">attribs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>

        <span class="c1"># return target</span>
        <span class="c1"># for prop in source.__dict__:</span>
        <span class="c1">#     if source.propertyIsEnumerable(prop):</span>
        <span class="c1">#         target.__dict__[prop] = source.__dict__[prop]</span>
        <span class="k">return</span> <span class="n">target</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="n">proto</span><span class="p">,</span> <span class="n">propertiesObject</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a new object with the specified prototype object and properties. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">propertiesObject</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Object</span><span class="p">(</span><span class="n">proto</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">propertiesObject</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Object</span><span class="p">(</span><span class="n">propertiesObject</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">propertiesObject</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">propertiesObject</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">propertiesObject</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Object</span><span class="o">.</span><span class="n">fromEntries</span><span class="p">(</span><span class="n">propertiesObject</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">propertiesObject</span>

        <span class="c1"># return Object(propertiesObject)</span>
    <span class="c1">#     obj = {}</span>
    <span class="c1">#     for key in proto.keys():</span>
    <span class="c1">#         obj[key] = propertiesObject[key]</span>
    <span class="c1">#     return obj</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">defineProperty</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">descriptor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds the named property described by a given descriptor to an object. &quot;&quot;&quot;</span>
        <span class="n">obj</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="n">descriptor</span>

    <span class="c1"># @staticmethod</span>
    <span class="c1"># def defineProperties(obj, props):</span>
    <span class="c1">#     &quot;&quot;&quot; Adds the named properties described by the given descriptors to an object. &quot;&quot;&quot;</span>
    <span class="c1">#     for prop, desc in props.items():</span>
    <span class="c1">#         obj.__define_property__(prop, desc)  # TODO - obviously that wont work</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">entries</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an array containing all of the [key, value] pairs in the object. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[[</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="k">return</span> <span class="p">[]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an array containing the names of all of the given object&#39;s own enumerable string properties.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>   <span class="c1"># TODO - this is probably wrong</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an array containing the values that correspond to</span>
<span class="sd">        all of a given object&#39;s own enumerable string properties. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>  <span class="c1"># TODO - this is probably wrong</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getOwnPropertyDescriptor</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a property descriptor for a named property on an object. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getOwnPropertyNames</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an array containing the names of all of the given object&#39;s</span>
<span class="sd">        own enumerable and non-enumerable properties. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">prop</span> <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">prop</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)]</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="c1"># @staticmethod</span>
    <span class="c1"># def _is(value1, value2):</span>
    <span class="c1">#     &quot;&quot;&quot; Compares if two values are the same value.</span>
    <span class="c1">#     Equates all NaN values (which differs from both Abstract Equality Comparison</span>
    <span class="c1">#  and Strict Equality Comparison).&quot;&quot;&quot;</span>
    <span class="c1">#     pass</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getOwnPropertySymbols</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an array of all symbol properties found directly upon a given object. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">prop</span> <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">prop</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getPrototypeOf</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the prototype (internal [[Prototype]] property) of the specified object. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">prototype</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">__proto__</span>

    <span class="c1"># @property #TODO - static or prop?</span>
    <span class="c1"># def isExtensible(obj):</span>
    <span class="c1">#     &quot;&quot;&quot; Determines if extending of an object is allowed &quot;&quot;&quot;</span>
    <span class="c1">#     return obj.__extensible</span>

    <span class="c1"># @property #TODO - static or prop?</span>
    <span class="c1"># def isSealed(obj):</span>
    <span class="c1">#     &quot;&quot;&quot; Determines if an object is sealed &quot;&quot;&quot;</span>
    <span class="c1">#     return obj.__sealed</span>

    <span class="c1"># @property</span>
    <span class="c1"># def preventExtensions(obj):</span>
    <span class="c1">#     &quot;&quot;&quot; Prevents any extensions of an object. &quot;&quot;&quot;</span>
    <span class="c1">#     if isinstance(obj, dict):</span>
    <span class="c1">#         return False</span>
    <span class="c1">#     elif isinstance(obj, Object):</span>
    <span class="c1">#         obj.extensible = False</span>
    <span class="c1">#         return True</span>
    <span class="c1">#     elif isinstance(obj, object):</span>
    <span class="c1">#         return False</span>
    <span class="c1">#     return False</span>

    <span class="c1"># @property</span>
    <span class="c1"># def seal(obj):</span>
    <span class="c1">#     &quot;&quot;&quot; Prevents other code from deleting properties of an object. &quot;&quot;&quot;</span>
    <span class="c1">#     if isinstance(obj, dict):</span>
    <span class="c1">#         return False</span>
    <span class="c1">#     elif isinstance(obj, Object):</span>
    <span class="c1">#         obj.sealed = True</span>
    <span class="c1">#         return True</span>
    <span class="c1">#     elif isinstance(obj, object):</span>
    <span class="c1">#         return False</span>
    <span class="c1">#     return False</span>

    <span class="c1"># @property</span>
    <span class="c1"># def setPrototypeOf(obj, prototype):</span>
    <span class="c1">#     &quot;&quot;&quot; Sets the object&#39;s prototype (its internal [[Prototype]] property). &quot;&quot;&quot;</span>
    <span class="c1">#     if isinstance(obj, dict):</span>
    <span class="c1">#         return False</span>
    <span class="c1">#     elif isinstance(obj, Object):</span>
    <span class="c1">#         obj.prototype = prototype</span>
    <span class="c1">#         return True</span>
    <span class="c1">#     elif isinstance(obj, object):</span>
    <span class="c1">#         return False</span>
    <span class="c1">#     return False</span>

    <span class="nd">@property</span>  <span class="c1"># TODO - static or prop?</span>
    <span class="k">def</span> <span class="nf">isFrozen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Determines if an object was frozen. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__isFrozen</span>

    <span class="nd">@staticmethod</span>  <span class="c1"># TODO - static or prop?</span>
    <span class="k">def</span> <span class="nf">freeze</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Freezes an object. Other code cannot delete or change its properties. &quot;&quot;&quot;</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">__isFrozen</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># def prototype(self, obj):</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     prototype and allows you to add properties and methods to this object</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     if isinstance(obj, dict):</span>
    <span class="c1">#         return False</span>
    <span class="c1">#     elif isinstance(obj, Object):</span>
    <span class="c1">#         obj.prototype = self</span>
    <span class="c1">#         return True</span>
    <span class="c1">#     elif isinstance(obj, object):</span>
    <span class="c1">#         return False</span>
    <span class="c1">#     return False</span>

    <span class="k">def</span> <span class="nf">__defineGetter__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a getter function for the specified property. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">__defineSetter__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Associates a function with a property that, when set, calls the function. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">__lookupGetter__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the getter function for the specified property.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__lookupSetter__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the function associated with the specified property by the __defineSetter__() method. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">hasOwnProperty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a boolean indicating whether an object contains the specified property</span>
<span class="sd">        as a direct property of that object and not inherited through the prototype chain. &quot;&quot;&quot;</span>
        <span class="c1"># raise NotImplementedError</span>
        <span class="c1"># return hasattr(self, prop)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">isPrototypeOf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a boolean indicating whether an object is a copy of this object. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">prototype</span> <span class="o">==</span> <span class="bp">self</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span> <span class="o">==</span> <span class="bp">self</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">__proto__</span> <span class="o">==</span> <span class="bp">self</span>

    <span class="c1"># def propertyIsEnumerable(self, prop):</span>
    <span class="c1">#     &quot;&quot;&quot; Returns a boolean indicating whether the specified property is enumerable. &quot;&quot;&quot;</span>
    <span class="c1">#     pass</span>

    <span class="k">def</span> <span class="nf">toLocaleString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Calls toString()&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a string representation of the object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;[&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span>

    <span class="k">def</span> <span class="nf">valueOf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the value of the object. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Iterates over object&#39;s properties. &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">prop</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">key</span>
        <span class="c1"># return</span>
        <span class="c1"># return self.__dict__.__iter__()</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the hash of the object. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toString</span><span class="p">())</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Compares two objects. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Compares two objects. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">__nonzero__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns whether the object is false. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns whether the object is false. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span>

    <span class="c1"># def __dict__(self):</span>
    <span class="c1">#     &quot;&quot;&quot; Returns the object&#39;s attributes as a dictionary. &quot;&quot;&quot;</span>
    <span class="c1">#     return self.__dict__</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the value of the specified property. &quot;&quot;&quot;</span>
        <span class="c1"># return self.__dict__[key]</span>
        <span class="c1"># return self.__dict__.get(key, None)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__deepcopy__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">memo</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Makes a deep copy of the object. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the value of the specified property. &quot;&quot;&quot;</span>
        <span class="c1"># self.__dict__[key] = value</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Deletes the specified property. &quot;&quot;&quot;</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the number of properties. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Returns whether the specified property exists.]</span>

<span class="sd">        Args:</span>
<span class="sd">            key ([str]): [The name of the property to check for.]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [bool]: [True if the specified property exists. Otherwise, False.]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span>

    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[gets the value of the specified property]</span>

<span class="sd">        Args:</span>
<span class="sd">            name ([str]): [the name of the property]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the value of the specified property]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[sets the value of the specified property]</span>

<span class="sd">        Args:</span>
<span class="sd">            name ([str]): [the name of the property]</span>
<span class="sd">            val ([str]): [the value of the property]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the value of the property]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__delattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[deletes the specified property]</span>

<span class="sd">        Args:</span>
<span class="sd">            name ([str]): [the name of the property]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [the value of the property]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__delitem__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="c1"># def __call__(self, *args, **kwargs):</span>
    <span class="c1">#     &quot;&quot;&quot; Calls the object. &quot;&quot;&quot;</span>
    <span class="c1">#     return self.toString()</span>


<div class="viewcode-block" id="Function"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Function">[docs]</a><span class="k">class</span> <span class="nc">Function</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; a Function object &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func</span> <span class="o">=</span> <span class="n">func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span> <span class="o">=</span> <span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">caller</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">displayName</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># self.isCallable = True</span>
        <span class="c1"># self.constructor = False</span>
        <span class="c1"># self.__proto__ = None</span>

<div class="viewcode-block" id="Function.apply"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Function.apply">[docs]</a>    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thisArg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[calls a function with a given this value, and arguments provided as an array]</span>

<span class="sd">        Args:</span>
<span class="sd">            thisArg ([type]): [The value of this provided for the call to func.]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [result of calling the function.]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">thisArg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>  <span class="c1"># kwargs?</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">()</span></div>

<div class="viewcode-block" id="Function.bind"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Function.bind">[docs]</a>    <span class="k">def</span> <span class="nf">bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thisArg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[creates a new function that, when called,</span>
<span class="sd">        has its this keyword set to the provided value,</span>
<span class="sd">        with a given sequence of arguments preceding any provided when the new function is called.]</span>

<span class="sd">        Args:</span>
<span class="sd">            thisArg ([type]): [The value to be passed as the this parameter to the target</span>
<span class="sd">            function func when the bound function is called.]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [A copy of the given function with the specified this value, and initial arguments (if provided).]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
        <span class="n">bound_f</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">*</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bound_f</span></div>
        <span class="c1"># raise NotImplementedError</span>

    <span class="c1"># @staticmethod</span>
<div class="viewcode-block" id="Function.call"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Function.call">[docs]</a>    <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thisArg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[calls a function with a given this value and arguments provided individually.]</span>

<span class="sd">        Args:</span>
<span class="sd">            thisArg ([type]): [description]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [result of calling the function.]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># raise NotImplementedError</span>
        <span class="c1"># print(&#39;CALL!!&#39;)</span>
        <span class="c1"># print(thisArg)</span>
        <span class="c1"># print(args)</span>
        <span class="c1"># if thisArg is not None:</span>
            <span class="c1"># return self.func(thisArg, *args)</span>
            <span class="c1"># return self.func(this=thisArg, *args)</span>

        <span class="c1"># print(&#39;AAAARGGS!!&#39;, args)</span>

        <span class="k">if</span> <span class="n">thisArg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">thisArg</span><span class="p">)</span>  <span class="c1"># kwargs?</span>
            <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">()</span></div>

<div class="viewcode-block" id="Function.toString"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Function.toString">[docs]</a>    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Returns a string representing the source code of the function. Overrides the]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div></div>


<div class="viewcode-block" id="Map"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Map">[docs]</a><span class="k">class</span> <span class="nc">Map</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Map holds key-value pairs and remembers the original insertion order of the keys.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">collection</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Pass a list or collection to make a Map object]</span>

<span class="sd">        Args:</span>
<span class="sd">            collection ([type]): [a list or dict]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># parses the passed collectionn</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="c1"># create a dict from the list</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">collection</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">collection</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="c1"># use the passed dict</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">collection</span> <span class="o">=</span> <span class="n">collection</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Map requires a list or dict.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_order</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

<div class="viewcode-block" id="Map.clear"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Map.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes all key-value pairs from the Map object. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_order</span> <span class="o">=</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="Map.delete"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Map.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns true if an element in the Map object existed and has been removed,</span>
<span class="sd">        or false if the element does not exist. Map.prototype.has(key) will return false afterwards. &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Map.get"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Map.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the value associated to the key, or undefined if there is none. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span></div>

<div class="viewcode-block" id="Map.has"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Map.has">[docs]</a>    <span class="k">def</span> <span class="nf">has</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a boolean asserting whether a value has been associated to the key in the Map object or not.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span></div>

<div class="viewcode-block" id="Map.set"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Map.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the value for the key in the Map object. Returns the Map object. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="bp">self</span></div>

    <span class="k">def</span> <span class="nf">iterkeys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

<div class="viewcode-block" id="Map.keys"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Map.keys">[docs]</a>    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a new Iterator object that contains the keys</span>
<span class="sd">        for each element in the Map object in insertion order. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iterkeys</span><span class="p">())</span></div>

<div class="viewcode-block" id="Map.values"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Map.values">[docs]</a>    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a new Iterator object that contains the values</span>
<span class="sd">        for each element in the Map object in insertion order. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iteritems</span><span class="p">())</span></div>

<div class="viewcode-block" id="Map.entries"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Map.entries">[docs]</a>    <span class="k">def</span> <span class="nf">entries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a new Iterator object that contains an array of [key, value]</span>
<span class="sd">        for each element in the Map object in insertion order. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">]</span></div>

    <span class="c1"># def forEach(self, callbackFn[, thisArg]):</span>
    <span class="c1">#     raise NotImplementedError</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ordered_dict</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">ordered_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">([(</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">])</span></div>


<span class="c1"># TODO - moved to webapi.xhr . might import here for convenience?</span>
<span class="c1"># class FormData(object):</span>
<span class="c1">#     &quot;&quot;&quot;[utils for a form]</span>

<span class="c1">#     Args:</span>
<span class="c1">#         object ([str]): [takes a string or pyml object and returns a FormData]</span>
<span class="c1">#     &quot;&quot;&quot;</span>

<span class="c1">#     def __init__(self, form):</span>
<span class="c1">#         &quot;&quot;&quot; creates a new FormData object. &quot;&quot;&quot;</span>
<span class="c1">#         # TODO - parse to domonic.</span>
<span class="c1">#         # if isinstance(form, str):</span>
<span class="c1">#         #   self._data = domonic.loads(form) # TODO - parser wont be done enough yet</span>
<span class="c1">#         # if isinstance(form, Node):</span>
<span class="c1">#         #   self._data = form</span>
<span class="c1">#         raise NotImplementedError</span>

<span class="c1">#     def append(self, name, value, filename):</span>
<span class="c1">#         &quot;&quot;&quot; Appends a new value onto an existing key inside a FormData object,</span>
<span class="c1">#         or adds the key if it does not already exist. &quot;&quot;&quot;</span>
<span class="c1">#         raise NotImplementedError</span>

<span class="c1">#     def delete(self, name):</span>
<span class="c1">#         &quot;&quot;&quot; Deletes a key/value pair from a FormData object. &quot;&quot;&quot;</span>
<span class="c1">#         raise NotImplementedError</span>

<span class="c1">#     def entries(self):</span>
<span class="c1">#         &quot;&quot;&quot; Returns an iterator allowing to go through all key/value pairs contained in this object. &quot;&quot;&quot;</span>
<span class="c1">#         raise NotImplementedError</span>

<span class="c1">#     def get(self, name):</span>
<span class="c1">#         &quot;&quot;&quot; Returns the first value associated with a given key from within a FormData object. &quot;&quot;&quot;</span>
<span class="c1">#         raise NotImplementedError</span>

<span class="c1">#     def getAll(self, name):</span>
<span class="c1">#         &quot;&quot;&quot; Returns an array of all the values associated with a given key from within a FormData &quot;&quot;&quot;</span>
<span class="c1">#         raise NotImplementedError</span>

<span class="c1">#     def has(self, name):</span>
<span class="c1">#         &quot;&quot;&quot; Returns a boolean stating whether a FormData object contains a certain key.&quot;&quot;&quot;</span>
<span class="c1">#         raise NotImplementedError</span>

<span class="c1">#     def keys(self):</span>
<span class="c1">#         &quot;&quot;&quot; Returns an iterator allowing to go through all keys of the key/value pairs contained in this object.&quot;&quot;&quot;</span>
<span class="c1">#         raise NotImplementedError</span>

<span class="c1">#     def set(self, name, value, filename):</span>
<span class="c1">#         &quot;&quot;&quot; Sets a new value for an existing key inside a FormData object,</span>
<span class="c1">#         or adds the key/value if it does not already exist.&quot;&quot;&quot;</span>
<span class="c1">#         raise NotImplementedError</span>

<span class="c1">#     def values(self):</span>
<span class="c1">#         &quot;&quot;&quot; Returns an iterator allowing to go through all values  contained in this object.&quot;&quot;&quot;</span>
<span class="c1">#         raise NotImplementedError</span>


<div class="viewcode-block" id="Worker"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Worker">[docs]</a><span class="k">class</span> <span class="nc">Worker</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;[A background task that can be created via script, which can send messages back to its creator.</span>
<span class="sd">    Creating a worker is done by calling the Worker(&quot;path/to/worker/script&quot;) constructor.]</span>
<span class="sd">    TODO - JSWorker - Node</span>
<span class="sd">    Args:</span>
<span class="sd">        object ([str]): [takes a path to a python script]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">script</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; creates a new Worker object. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

<div class="viewcode-block" id="Worker.postMessage"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Worker.postMessage">[docs]</a>    <span class="k">def</span> <span class="nf">postMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sends a message — consisting of any object — to the worker&#39;s inner scope. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Worker.terminate"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Worker.terminate">[docs]</a>    <span class="k">def</span> <span class="nf">terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Immediately terminates the worker. This does not let worker finish its operations; it is halted at once.</span>
<span class="sd">        ServiceWorker instances do not support this method. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div></div>


<div class="viewcode-block" id="Math"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Math">[docs]</a><span class="k">class</span> <span class="nc">Math</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Math class that mirrors javascript implementation.</span>

<span class="sd">    i.e. you can pass strings and it will also work</span>
<span class="sd">    Math.abs(&#39;-1&#39;)</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># CONSTANTS</span>
    <span class="n">PI</span> <span class="o">=</span> <span class="mf">3.141592653589793</span>
    <span class="n">E</span> <span class="o">=</span> <span class="mf">2.718281828459045</span>
    <span class="n">LN2</span> <span class="o">=</span> <span class="mf">0.6931471805599453</span>
    <span class="n">LN10</span> <span class="o">=</span> <span class="mf">2.302585092994046</span>
    <span class="n">LOG2E</span> <span class="o">=</span> <span class="mf">1.4426950408889634</span>
    <span class="n">LOG10E</span> <span class="o">=</span> <span class="mf">0.4342944819032518</span>
    <span class="n">SQRT1_2</span> <span class="o">=</span> <span class="mf">0.7071067811865476</span>
    <span class="n">SQRT2</span> <span class="o">=</span> <span class="mf">1.4142135623730951</span>

    <span class="k">def</span> <span class="nf">_force_number</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[private decorator to make Math behave like javascript and turn strings, bools and None into numbers]]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">validation_decorator</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">params</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>

                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="nb">tuple</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">params</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">params</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                        <span class="n">params</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="k">continue</span>

                <span class="k">if</span> <span class="n">n</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">params</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">continue</span>

                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">float</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">int</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">in</span> <span class="n">n</span><span class="p">:</span>
                            <span class="n">params</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">params</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                        <span class="c1"># raise ValueError(&quot;&quot;)</span>
                        <span class="c1"># js returns None instead</span>
                        <span class="k">pass</span>

            <span class="n">args</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">validation_decorator</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">abs</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the absolute value of x &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">acos</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the arccosine of x, in radians &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">acos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">acosh</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the hyperbolic arccosine of x &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">acosh</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">asin</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the arcsine of x, in radians &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">asin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">asinh</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the hyperbolic arcsine of x &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">asinh</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">atan</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the arctangent of x as a numeric value between -PI/2 and PI/2 radians &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">atan</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">atan2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the arctangent of the quotient of its arguments &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">atanh</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the hyperbolic arctangent of x &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">atanh</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">cbrt</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the cubic root of x &quot;&quot;&quot;</span>
        <span class="c1"># return math.cbrt(x)</span>
        <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">3</span><span class="p">))</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">ceil</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns x, rounded upwards to the nearest integer &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">cos</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the cosine of x (x is in radians) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">cosh</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the hyperbolic cosine of x &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">cosh</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">exp</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the value of Ex &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">floor</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns x, rounded downwards to the nearest integer &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">log</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the natural logarithm (base E) of x &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">max</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the number with the highest value &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">min</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the number with the lowest value &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">random</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot; Returns a random number between 0 and 1 &quot;&quot;&quot;</span>
        <span class="c1"># return math.random(x)</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">round</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Rounds x to the nearest integer &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">pow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the value of x to the power of y &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">sin</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the sine of x (x is in radians) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">sinh</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the hyperbolic sine of x &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sinh</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the square root of x &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">tan</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the tangent of an angle &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">tanh</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the hyperbolic tangent of a number &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">trunc</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the integer part of a number (x) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">trunc</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="c1"># TODO - test</span>
<div class="viewcode-block" id="Math.hypot"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Math.hypot">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="c1"># @_force_number</span>
    <span class="k">def</span> <span class="nf">hypot</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the square root of the sum of squares of its arguments &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

    <span class="c1"># TODO - test</span>
<div class="viewcode-block" id="Math.log2"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Math.log2">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="c1"># @_force_number</span>
    <span class="k">def</span> <span class="nf">log2</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the square root of the sum of squares of its arguments &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

    <span class="c1"># TODO - test</span>
<div class="viewcode-block" id="Math.loglp"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Math.loglp">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="c1"># @_force_number</span>
    <span class="k">def</span> <span class="nf">loglp</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the natural logarithm (base e) of 1 + a number, that is &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">loglp</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

    <span class="c1"># TODO - test</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">log10</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; function returns the base 10 logarithm of a number, that is &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="c1"># TODO - test</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">fround</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the nearest 32-bit single precision float representation of a Number &quot;&quot;&quot;</span>
        <span class="c1"># return math.log10(x)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="c1"># TODO - test</span>
    <span class="nd">@staticmethod</span>
    <span class="nd">@_force_number</span>
    <span class="k">def</span> <span class="nf">clz32</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the number of leading zero bits in the 32-bit binary representation of a number. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>


<span class="c1"># import urllib</span>


<div class="viewcode-block" id="Global"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global">[docs]</a><span class="k">class</span> <span class="nc">Global</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; javascript global methods &quot;&quot;&quot;</span>

    <span class="n">NaN</span> <span class="o">=</span> <span class="s2">&quot;NaN&quot;</span>
    <span class="n">Infinity</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">)</span>

    <span class="n">__timers</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># TODO - https://stackoverflow.com/questions/747641/what-is-the-difference-between-decodeuricomponent-and-decodeuri</span>

<div class="viewcode-block" id="Global.decodeURI"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global.decodeURI">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">decodeURI</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Decodes a URI &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">unquote</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></div>

<div class="viewcode-block" id="Global.decodeURIComponent"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global.decodeURIComponent">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">decodeURIComponent</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Decodes a URI component &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">unquote</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Global.encodeURI"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global.encodeURI">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">encodeURI</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Encodes a URI &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">quote</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">safe</span><span class="o">=</span><span class="s1">&#39;~@#$&amp;()*!+=:;,.?/</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Global.encodeURIComponent"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global.encodeURIComponent">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">encodeURIComponent</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Encodes a URI component &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">quote</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">safe</span><span class="o">=</span><span class="s1">&#39;~()*!.</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="c1"># @staticmethod</span>
    <span class="c1"># def escape():</span>
        <span class="sd">&quot;&quot;&quot; Deprecated in version 1.5. Use encodeURI() or encodeURIComponent() &quot;&quot;&quot;</span></div>
        <span class="c1"># pass</span>

<div class="viewcode-block" id="Global.eval"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global.eval">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">eval</span><span class="p">(</span><span class="n">pythonstring</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Evaluates a string and executes it as if it was script code &quot;&quot;&quot;</span>
        <span class="nb">eval</span><span class="p">(</span><span class="n">pythonstring</span><span class="p">)</span></div>

<div class="viewcode-block" id="Global.isFinite"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global.isFinite">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">isFinite</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>  <span class="c1"># TODO - test</span>
        <span class="sd">&quot;&quot;&quot; Returns true if x is a finite number &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></div>

<div class="viewcode-block" id="Global.isNaN"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global.isNaN">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">isNaN</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Determines whether a value is an illegal number &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Global.NaN"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global.NaN">[docs]</a>    <span class="k">def</span> <span class="nf">NaN</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; &quot;Not-a-Number&quot; value &quot;&quot;&quot;</span>
        <span class="c1"># return self.NaN</span>
        <span class="k">return</span> <span class="s2">&quot;NaN&quot;</span></div>

<div class="viewcode-block" id="Global.Number"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global.Number">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">Number</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Converts an object&#39;s value to a number &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">float</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">:</span>  <span class="c1"># or type(x) == long:</span>
                <span class="k">return</span> <span class="n">x</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
                    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;NaN&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;NaN&quot;</span></div>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">Boolean</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>  <span class="c1"># TODO - test</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">x</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;false&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">elif</span> <span class="n">x</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">x</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">object</span><span class="p">)):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="Global.parseFloat"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global.parseFloat">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parseFloat</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Parses a string and returns a floating point number &quot;&quot;&quot;</span>
        <span class="c1"># return float(x)</span>
        <span class="kn">import</span> <span class="nn">ast</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">x</span><span class="p">))</span></div>

<div class="viewcode-block" id="Global.parseInt"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global.parseInt">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parseInt</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Parses a string and returns an integer &quot;&quot;&quot;</span>
        <span class="c1"># return int(x)</span>
        <span class="kn">import</span> <span class="nn">ast</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">x</span><span class="p">))</span></div>

<div class="viewcode-block" id="Global.String"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global.String">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">String</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Converts an object&#39;s value to a string &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></div>

<div class="viewcode-block" id="Global.undefined"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global.undefined">[docs]</a>    <span class="k">def</span> <span class="nf">undefined</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Indicates that a variable has not been assigned a value &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># @staticmethod</span>
    <span class="c1"># def unescape():</span>
        <span class="sd">&quot;&quot;&quot; Deprecated in version 1.5. Use decodeURI() or decodeURIComponent() instead &quot;&quot;&quot;</span></div>
        <span class="c1"># pass</span>

<div class="viewcode-block" id="Global.require"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global.require">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">require</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Loads a script from a file &quot;&quot;&quot;</span>
        <span class="c1"># &#39;.&#39;.join(path.split(&#39;/&#39;))</span>
        <span class="c1"># module = __import__(path)  # app.components.{component}</span>
        <span class="c1"># my_class = getattr(module, component.title())</span>
        <span class="c1"># return my_class()</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Global.setTimeout"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global.setTimeout">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">setTimeout</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[sets a timer which executes a function or evaluates an expression after a specified delay]</span>

<span class="sd">        Args:</span>
<span class="sd">            callback (function): [method to be executed after the delay]</span>
<span class="sd">            t ([int]): [milliseconds]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [an identifier for the timer]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>

        <span class="n">timer</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Timer</span><span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">timer_id</span> <span class="o">=</span> <span class="nb">id</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span>
        <span class="n">Global</span><span class="o">.</span><span class="n">__timers</span><span class="p">[</span><span class="n">timer_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">timer</span>
        <span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">timer_id</span></div>

<div class="viewcode-block" id="Global.clearTimeout"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Global.clearTimeout">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">clearTimeout</span><span class="p">(</span><span class="n">timeoutID</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; [cancels a timer set with setTimeout()]</span>

<span class="sd">        Args:</span>
<span class="sd">            timeoutID ([str]): [the identifier returned by setTimeout()]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Global</span><span class="o">.</span><span class="n">__timers</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">timeoutID</span><span class="p">)</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span></div></div>


<span class="c1"># NOTE - for globals use the class to make them but then register them here</span>
<span class="n">decodeURI</span> <span class="o">=</span> <span class="n">Global</span><span class="o">.</span><span class="n">decodeURI</span>
<span class="n">decodeURIComponent</span> <span class="o">=</span> <span class="n">Global</span><span class="o">.</span><span class="n">decodeURIComponent</span>
<span class="n">encodeURI</span> <span class="o">=</span> <span class="n">Global</span><span class="o">.</span><span class="n">encodeURI</span>
<span class="n">encodeURIComponent</span> <span class="o">=</span> <span class="n">Global</span><span class="o">.</span><span class="n">encodeURIComponent</span>
<span class="n">parseFloat</span> <span class="o">=</span> <span class="n">Global</span><span class="o">.</span><span class="n">parseFloat</span>
<span class="n">parseInt</span> <span class="o">=</span> <span class="n">Global</span><span class="o">.</span><span class="n">parseInt</span>
<span class="n">setTimeout</span> <span class="o">=</span> <span class="n">Global</span><span class="o">.</span><span class="n">setTimeout</span>
<span class="n">clearTimeout</span> <span class="o">=</span> <span class="n">Global</span><span class="o">.</span><span class="n">clearTimeout</span>


<span class="k">class</span> <span class="nc">Performance</span><span class="p">():</span>

    <span class="n">_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">now</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">end</span> <span class="o">-</span> <span class="n">Performance</span><span class="o">.</span><span class="n">_start</span>

    <span class="c1"># def reset(self):</span>
    <span class="c1">#     Performance._start = time.time()</span>


<span class="n">performance</span> <span class="o">=</span> <span class="n">Performance</span><span class="p">()</span>


<div class="viewcode-block" id="Date"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date">[docs]</a><span class="k">class</span> <span class="nc">Date</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; javascript date &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">formatter</span><span class="o">=</span><span class="s1">&#39;python&#39;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formatter</span> <span class="o">=</span> <span class="n">formatter</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="c1"># elif isinstance(date, str):</span>
        <span class="c1">#     if formatter == &#39;python&#39;:</span>
        <span class="c1">#         self.date = datetime.datetime.strptime(date, &#39;%Y-%m-%d %H:%M:%S&#39;)</span>
        <span class="c1">#     elif formatter == &#39;javascript&#39;:</span>
        <span class="c1">#         self.date = datetime.datetime.strptime(date, &#39;%Y-%m-%dT%H:%M:%S.%fZ&#39;)</span>
        <span class="c1">#     else:</span>
        <span class="c1">#         raise ValueError(&#39;Invalid formatter&#39;)</span>
        <span class="k">if</span> <span class="n">date</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_date</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

<div class="viewcode-block" id="Date.toString"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.toString">[docs]</a>    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a string representation of the date &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatter</span> <span class="o">==</span> <span class="s1">&#39;python&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">T%H:%M:%S.</span><span class="si">%f</span><span class="s1">Z&#39;</span><span class="p">)</span>  <span class="c1">#js</span></div>

    <span class="k">def</span> <span class="nf">parse_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date_string</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">date_string</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span>

<div class="viewcode-block" id="Date.getDate"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getDate">[docs]</a>    <span class="k">def</span> <span class="nf">getDate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the day of the month (from 1-31) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">day</span></div>
        <span class="c1"># TODO - do for a date object passed in. this only does today</span>

<div class="viewcode-block" id="Date.getDay"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getDay">[docs]</a>    <span class="k">def</span> <span class="nf">getDay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Returns the day of the week (from 0-6) &quot;&quot;&quot;</span>
        <span class="n">day</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">isoweekday</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">day</span> <span class="k">if</span> <span class="p">(</span><span class="n">day</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span></div>
        <span class="c1"># TODO - do for a date object passed in. this only does today</span>

<div class="viewcode-block" id="Date.getFullYear"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getFullYear">[docs]</a>    <span class="k">def</span> <span class="nf">getFullYear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the year &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">year</span></div>

<div class="viewcode-block" id="Date.getHours"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getHours">[docs]</a>    <span class="k">def</span> <span class="nf">getHours</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Returns the hour (from 0-23) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">hour</span></div>

<div class="viewcode-block" id="Date.getMilliseconds"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getMilliseconds">[docs]</a>    <span class="k">def</span> <span class="nf">getMilliseconds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the milliseconds (from 0-999) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">microsecond</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span></div>

<div class="viewcode-block" id="Date.getMinutes"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getMinutes">[docs]</a>    <span class="k">def</span> <span class="nf">getMinutes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Returns the minutes (from 0-59) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">minute</span></div>

<div class="viewcode-block" id="Date.getMonth"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getMonth">[docs]</a>    <span class="k">def</span> <span class="nf">getMonth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the month (from 0-11) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">month</span> <span class="o">-</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="Date.getSeconds"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getSeconds">[docs]</a>    <span class="k">def</span> <span class="nf">getSeconds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Returns the seconds (from 0-59) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">second</span></div>

<div class="viewcode-block" id="Date.getTime"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getTime">[docs]</a>    <span class="k">def</span> <span class="nf">getTime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the number of milliseconds since midnight Jan 1 1970, and a specified date &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span></div>
        <span class="c1"># TODO - whats difference between this and &#39;now()&#39; ?</span>

<div class="viewcode-block" id="Date.getTimezoneOffset"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getTimezoneOffset">[docs]</a>    <span class="k">def</span> <span class="nf">getTimezoneOffset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the time difference between UTC time and local time, in minutes &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">()</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">/</span> <span class="mi">60</span>  <span class="c1"># TODO - TEST</span></div>

<div class="viewcode-block" id="Date.getUTCDate"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getUTCDate">[docs]</a>    <span class="k">def</span> <span class="nf">getUTCDate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the day of the month, according to universal time (from 1-31) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">month</span></div>

<div class="viewcode-block" id="Date.getUTCDay"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getUTCDay">[docs]</a>    <span class="k">def</span> <span class="nf">getUTCDay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the day of the week, according to universal time (from 0-6) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">day</span></div>

<div class="viewcode-block" id="Date.getUTCFullYear"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getUTCFullYear">[docs]</a>    <span class="k">def</span> <span class="nf">getUTCFullYear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the year, according to universal time &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">year</span></div>

<div class="viewcode-block" id="Date.getUTCHours"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getUTCHours">[docs]</a>    <span class="k">def</span> <span class="nf">getUTCHours</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the hour, according to universal time (from 0-23) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">hour</span></div>

<div class="viewcode-block" id="Date.getUTCMilliseconds"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getUTCMilliseconds">[docs]</a>    <span class="k">def</span> <span class="nf">getUTCMilliseconds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the milliseconds, according to universal time (from 0-999) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">microsecond</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span></div>

<div class="viewcode-block" id="Date.getUTCMinutes"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getUTCMinutes">[docs]</a>    <span class="k">def</span> <span class="nf">getUTCMinutes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the minutes, according to universal time (from 0-59) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">minute</span></div>

<div class="viewcode-block" id="Date.getUTCMonth"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getUTCMonth">[docs]</a>    <span class="k">def</span> <span class="nf">getUTCMonth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the month, according to universal time (from 0-11) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">month</span> <span class="o">-</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="Date.getUTCSeconds"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getUTCSeconds">[docs]</a>    <span class="k">def</span> <span class="nf">getUTCSeconds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the seconds, according to universal time (from 0-59) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">second</span></div>

<div class="viewcode-block" id="Date.getYear"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.getYear">[docs]</a>    <span class="k">def</span> <span class="nf">getYear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Deprecated. Use the getFullYear() method instead &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">year</span></div>

<div class="viewcode-block" id="Date.now"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.now">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">now</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot; Returns the number of milliseconds since midnight Jan 1, 1970 &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span></div>

    <span class="c1"># @staticmethod</span>
<div class="viewcode-block" id="Date.parse"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.parse">[docs]</a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date_string</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Parses a date string and returns the number of milliseconds since January 1, 1970 &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_date</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">date_string</span><span class="p">))</span>  <span class="c1">#  TODO - huh?</span></div>
        <span class="c1"># return self.date.getTime()</span>

<div class="viewcode-block" id="Date.setDate"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.setDate">[docs]</a>    <span class="k">def</span> <span class="nf">setDate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">day</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the day of the month of a date object &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">day</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">day</span><span class="p">))</span></div>
        <span class="c1"># return self.date.getTime()</span>

<div class="viewcode-block" id="Date.setFullYear"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.setFullYear">[docs]</a>    <span class="k">def</span> <span class="nf">setFullYear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">year</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the year of a date object &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">year</span><span class="p">))</span></div>
        <span class="c1"># return self.date.getTime()</span>

<div class="viewcode-block" id="Date.setHours"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.setHours">[docs]</a>    <span class="k">def</span> <span class="nf">setHours</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hours</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the hour of a date object &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">hours</span><span class="p">))</span></div>
        <span class="c1"># return self.date.getTime()</span>

<div class="viewcode-block" id="Date.setMilliseconds"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.setMilliseconds">[docs]</a>    <span class="k">def</span> <span class="nf">setMilliseconds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">milliseconds</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the milliseconds of a date object &quot;&quot;&quot;</span>
        <span class="c1"># self.date.replace(millisecond=int(milliseconds))</span>
        <span class="c1"># return self.now()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;TODO: setMilliseconds&#39;</span><span class="p">)</span>
        <span class="k">pass</span></div>

    <span class="c1"># TODO - , seconds = None, milliseconds = None):</span>
<div class="viewcode-block" id="Date.setMinutes"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.setMinutes">[docs]</a>    <span class="k">def</span> <span class="nf">setMinutes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minutes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Set the minutes of a date object &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">minutes</span><span class="p">))</span></div>
        <span class="c1"># return self.now()</span>

<div class="viewcode-block" id="Date.setMonth"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.setMonth">[docs]</a>    <span class="k">def</span> <span class="nf">setMonth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">month</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the month of a date object &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">month</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">month</span><span class="p">))</span></div>
        <span class="c1"># return self.now()</span>

<div class="viewcode-block" id="Date.setSeconds"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.setSeconds">[docs]</a>    <span class="k">def</span> <span class="nf">setSeconds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seconds</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the seconds of a date object &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">second</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">seconds</span><span class="p">))</span></div>
        <span class="c1"># return self.now()</span>

    <span class="c1"># Sets a date to a specified number of milliseconds after/before January 1, 1970</span>
<div class="viewcode-block" id="Date.setTime"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.setTime">[docs]</a>    <span class="k">def</span> <span class="nf">setTime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">milliseconds</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the number of milliseconds since January 1, 1970 &quot;&quot;&quot;</span>
        <span class="c1"># test copilot</span>
        <span class="c1"># self.date.replace(millisecond=int(milliseconds))</span>
        <span class="c1"># return self.now() # TODO - is this right? - is this same as now()?</span>
        <span class="c1"># print(&#39;TODO: setTime&#39;)</span>
        <span class="c1"># raise NotImplementedErro</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Date.setUTCDate"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.setUTCDate">[docs]</a>    <span class="k">def</span> <span class="nf">setUTCDate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">day</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Sets the day of the month of a date object, according to universal time &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setDate</span><span class="p">(</span><span class="n">day</span><span class="p">)</span></div>
        <span class="c1"># return self.getTime()</span>

<div class="viewcode-block" id="Date.setUTCFullYear"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.setUTCFullYear">[docs]</a>    <span class="k">def</span> <span class="nf">setUTCFullYear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">year</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Sets the year of a date object, according to universal time &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFullYear</span><span class="p">(</span><span class="n">year</span><span class="p">)</span></div>
        <span class="c1"># return self.getTime()</span>

<div class="viewcode-block" id="Date.setUTCHours"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.setUTCHours">[docs]</a>    <span class="k">def</span> <span class="nf">setUTCHours</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hour</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the hour of a date object, according to universal time &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setHours</span><span class="p">(</span><span class="n">hour</span><span class="p">)</span></div>
        <span class="c1"># return self.getTime()</span>

<div class="viewcode-block" id="Date.setUTCMilliseconds"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.setUTCMilliseconds">[docs]</a>    <span class="k">def</span> <span class="nf">setUTCMilliseconds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">milliseconds</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Sets the milliseconds of a date object, according to universal time &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMilliseconds</span><span class="p">(</span><span class="n">milliseconds</span><span class="p">)</span></div>
        <span class="c1"># return self.getTime()</span>

<div class="viewcode-block" id="Date.setUTCMinutes"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.setUTCMinutes">[docs]</a>    <span class="k">def</span> <span class="nf">setUTCMinutes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minutes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;   Set the minutes of a date object, according to universal time &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMinutes</span><span class="p">(</span><span class="n">minutes</span><span class="p">)</span></div>
        <span class="c1"># return self.getTime()</span>

<div class="viewcode-block" id="Date.setUTCMonth"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.setUTCMonth">[docs]</a>    <span class="k">def</span> <span class="nf">setUTCMonth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">month</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the month of a date object, according to universal time &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMonth</span><span class="p">(</span><span class="n">month</span><span class="p">)</span></div>
        <span class="c1"># return self.getTime()</span>

<div class="viewcode-block" id="Date.setUTCSeconds"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.setUTCSeconds">[docs]</a>    <span class="k">def</span> <span class="nf">setUTCSeconds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seconds</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;   Set the seconds of a date object, according to universal time &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setSeconds</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span></div>
        <span class="c1"># return self.getTime()</span>

<div class="viewcode-block" id="Date.setYear"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.setYear">[docs]</a>    <span class="k">def</span> <span class="nf">setYear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">year</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Deprecated. Use the setFullYear() method instead &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">year</span><span class="p">))</span></div>
        <span class="c1"># return self.getTime()</span>
        <span class="c1"># TODO - there may not be a date object already?</span>

<div class="viewcode-block" id="Date.toDateString"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.toDateString">[docs]</a>    <span class="k">def</span> <span class="nf">toDateString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Converts the date portion of a Date object into a readable string &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Date.toUTCString"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.toUTCString">[docs]</a>    <span class="k">def</span> <span class="nf">toUTCString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Converts a Date object to a string, according to universal time &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Date.toGMTString"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.toGMTString">[docs]</a>    <span class="k">def</span> <span class="nf">toGMTString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Deprecated. Use the toUTCString() method instead &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">toUTCString</span><span class="p">()</span></div>

<div class="viewcode-block" id="Date.toJSON"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.toJSON">[docs]</a>    <span class="k">def</span> <span class="nf">toJSON</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Returns the date as a string, formatted as a JSON date &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">json</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="Date.toISOString"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.toISOString">[docs]</a>    <span class="k">def</span> <span class="nf">toISOString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the date as a string, using the ISO standard &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Date.toLocaleDateString"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.toLocaleDateString">[docs]</a>    <span class="k">def</span> <span class="nf">toLocaleDateString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the date portion of a Date object as a string, using locale conventions &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%x</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Date.toLocaleString"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.toLocaleString">[docs]</a>    <span class="k">def</span> <span class="nf">toLocaleString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Converts a Date object to a string, using locale conventions &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%x</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Date.toLocaleTimeString"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.toLocaleTimeString">[docs]</a>    <span class="k">def</span> <span class="nf">toLocaleTimeString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the time portion of a Date object as a string, using locale conventions &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%X</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Date.toTimeString"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.toTimeString">[docs]</a>    <span class="k">def</span> <span class="nf">toTimeString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Converts the time portion of a Date object to a string &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%X</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Date.UTC"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Date.UTC">[docs]</a>    <span class="k">def</span> <span class="nf">UTC</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the number of milliseconds in a date since midnight of January 1, 1970, according to UTC time &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="Screen"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Screen">[docs]</a><span class="k">class</span> <span class="nc">Screen</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; screen &quot;&quot;&quot;</span>

    <span class="c1"># wrap a lib?</span>
    <span class="c1"># https://github.com/rr-/screeninfo?</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># from sys import platform</span>
        <span class="c1"># if platform == &quot;linux&quot; or platform == &quot;linux2&quot;:</span>
        <span class="c1">#     # linux</span>
        <span class="c1"># import subprocess</span>
        <span class="c1"># resuls = subprocess.Popen([&#39;xrandr&#39;],stdout=subprocess.PIPE).communicate()[0].split(&quot;current&quot;)[1].split(&quot;,&quot;)[0]</span>
        <span class="c1"># width = resuls.split(&quot;x&quot;)[0].strip()</span>
        <span class="c1"># heigth = resuls.split(&quot;x&quot;)[1].strip()</span>
        <span class="c1"># print width + &quot;x&quot; + heigth</span>
        <span class="c1"># elif platform == &quot;darwin&quot;:</span>
        <span class="c1">#     # OS X</span>
        <span class="c1"># results = str(subprocess.Popen([&#39;system_profiler SPDisplaysDataType&#39;],stdout=subprocess.PIPE, shell=True).communicate()[0])</span>
        <span class="c1"># res = re.search(&#39;Resolution: \d* x \d*&#39;, results).group(0).split(&#39; &#39;)</span>
        <span class="c1"># width, height = res[1], res[3]</span>
        <span class="c1"># return width, height</span>
        <span class="c1"># elif platform == &quot;win32&quot;:</span>
        <span class="c1"># from win32api import GetSystemMetrics</span>
        <span class="c1"># print(&quot;Width =&quot;, GetSystemMetrics(0))</span>
        <span class="c1"># print(&quot;Height =&quot;, GetSystemMetrics(1))</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="Screen.availHeight"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Screen.availHeight">[docs]</a>    <span class="k">def</span> <span class="nf">availHeight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the height of the screen (excluding the Windows Taskbar) &#39;&#39;&#39;</span>
        <span class="c1"># return self.height</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Screen.availWidth"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Screen.availWidth">[docs]</a>    <span class="k">def</span> <span class="nf">availWidth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the width of the screen (excluding the Windows Taskbar) &#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Screen.colorDepth"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Screen.colorDepth">[docs]</a>    <span class="k">def</span> <span class="nf">colorDepth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the colorDepth &#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Screen.height"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Screen.height">[docs]</a>    <span class="k">def</span> <span class="nf">height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the total height of the screen &#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Screen.pixelDepth"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Screen.pixelDepth">[docs]</a>    <span class="k">def</span> <span class="nf">pixelDepth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the pixelDepth &#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Screen.width"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Screen.width">[docs]</a>    <span class="k">def</span> <span class="nf">width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the total width of the screen  &#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div></div>


<div class="viewcode-block" id="ProgramKilled"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.ProgramKilled">[docs]</a><span class="k">class</span> <span class="nc">ProgramKilled</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="Job"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Job">[docs]</a><span class="k">class</span> <span class="nc">Job</span><span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interval</span><span class="p">,</span> <span class="n">execute</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">daemon</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stopped</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interval</span> <span class="o">=</span> <span class="n">interval</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execute</span> <span class="o">=</span> <span class="n">execute</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stopped</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

<div class="viewcode-block" id="Job.run"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Job.run">[docs]</a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopped</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span></div></div>

    <span class="c1"># def __str__(self):</span>
    <span class="c1">#     return &quot;Job every %s&quot; % self.interval</span>


<span class="k">class</span> <span class="nc">SetInterval</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">signal_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signum</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ProgramKilled</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGTERM</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">signal_handler</span><span class="p">)</span>
        <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGINT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">signal_handler</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">job</span> <span class="o">=</span> <span class="n">Job</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="n">time</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">),</span> <span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">job</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="c1"># def stop(self):</span>
    <span class="c1">#     self.job.stop()</span>


<span class="k">class</span> <span class="nc">Promise</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1"># undocumented - warning. use at own risk</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># print(&#39;init&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;pending&#39;</span>  <span class="c1"># fullfilled, rejected</span>
        <span class="k">if</span> <span class="n">func</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolve</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">reject</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">then</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">func</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># print(&#39;---&gt;&#39;,self.data)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
            <span class="c1"># print(&#39;--&gt;&#39;,self.data)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">catch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
        <span class="c1"># func(error)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="c1"># print( &#39;resolve called::&#39;, data )</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;fulfilled&quot;</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">reject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;rejected&quot;</span>
        <span class="k">return</span> <span class="bp">self</span>
    <span class="c1"># def __str__(self):</span>
    <span class="c1">#     try:</span>
    <span class="c1">#         return self.data.text</span>
    <span class="c1">#     except Exception as e:</span>
    <span class="c1">#         print(e)</span>
    <span class="c1">#     return str(self)</span>


<span class="k">class</span> <span class="nc">FetchedSet</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>  <span class="c1"># not a promise</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">oncomplete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>  <span class="c1"># runs once all results are back</span>
        <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># def __call__(self, func):</span>
    <span class="c1">#     self.results.append(func)</span>


<span class="k">class</span> <span class="nc">Storage</span><span class="p">():</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[localstorage. destroys on each session unless you pass the optional filepath]</span>

<span class="sd">        Args:</span>
<span class="sd">            filepath ([type], optional): [filepath]. give us a file to write to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">has_file</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">filepath</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">filepath</span> <span class="o">=</span> <span class="n">filepath</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">has_file</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># check if file exists. if so load it in . if not create it</span>
        <span class="k">if</span> <span class="n">filepath</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filepath</span><span class="p">):</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an integer representing the number of data items stored in the Storage object. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">_save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_file</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">setItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keyName</span><span class="p">,</span> <span class="n">keyValue</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds that key to the storage, or update that key&#39;s value if it already exists &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">[</span><span class="n">keyName</span><span class="p">]</span> <span class="o">=</span> <span class="n">keyValue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_file</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">getItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keyName</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the value of the specified key name Storage &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keyName</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keyName</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the value of the key if it exists, otherwise returns None &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keyName</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">removeItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keyName</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes the key and its value from the storage &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">keyName</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">[</span><span class="n">keyName</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_update_file</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes all items from the storage &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="o">=</span> <span class="p">{}</span>


<div class="viewcode-block" id="Window"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Window">[docs]</a><span class="k">class</span> <span class="nc">Window</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; window &quot;&quot;&quot;</span>

    <span class="n">localStorage</span> <span class="o">=</span> <span class="n">Storage</span><span class="p">()</span>
    <span class="n">location</span> <span class="o">=</span> <span class="s1">&#39;eventual.technology&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># self.console = dom.console</span>
        <span class="c1"># self.document = Document</span>
        <span class="c1"># globals()?</span>
        <span class="c1"># dir()?</span>
        <span class="c1"># locals()?</span>
        <span class="k">pass</span>

    <span class="c1"># TODO - tell users to use other window class if methods are called.</span>

<div class="viewcode-block" id="Window.alert"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Window.alert">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">alert</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Displays an alert box with a message and an OK button &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span></div>

<div class="viewcode-block" id="Window.prompt"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Window.prompt">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">prompt</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">default_text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Displays a dialog box that prompts the visitor for input &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">data</span></div>

    <span class="n">setTimeout</span> <span class="o">=</span> <span class="n">Global</span><span class="o">.</span><span class="n">setTimeout</span>
    <span class="n">clearTimeout</span> <span class="o">=</span> <span class="n">Global</span><span class="o">.</span><span class="n">clearTimeout</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">clearInterval</span><span class="p">(</span><span class="n">job</span><span class="p">):</span>
        <span class="n">job</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">setInterval</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">interval_ID</span> <span class="o">=</span> <span class="n">SetInterval</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">interval_ID</span><span class="o">.</span><span class="n">job</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_do_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># private - don&#39;t use directly. use one of the fetch methods</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># r = requests.get(url, timeout=3)</span>
            <span class="kn">from</span> <span class="nn">requests</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">Session</span>

            <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;GET&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;method&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">method</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;method&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="s2">&quot;callback_function&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;callback_function&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="s2">&quot;error_handler&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;error_handler&quot;</span><span class="p">]</span>

            <span class="n">s</span> <span class="o">=</span> <span class="n">Session</span><span class="p">()</span>
            <span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
            <span class="n">prepped</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">prepare_request</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">prepped</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="c1"># print(r.status_code)</span>
            <span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="ow">is</span> <span class="n">FetchedSet</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">r</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Request Failed for URL: </span><span class="si">{url}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">fetch</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># undocumented - warning. use at own risk</span>
        <span class="c1"># note - kinda pointless atm. just use requests directly and you wont have to muck about with a Promise</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;fetch takes a single url string. use fetch_set, fetch_threaded or fetch_pooled&#39;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">Promise</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">_do_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="o">*</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">fetch_set</span><span class="p">(</span><span class="n">urls</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">callback_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">error_handler</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># undocumented - warning. use at own risk</span>
        <span class="c1"># note - still blocks. just gets all before continuing</span>
        <span class="c1"># problems - all urls can only have 1 associated callback, error and set of kwargs</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">urls</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">urls</span> <span class="o">=</span> <span class="p">[</span><span class="n">urls</span><span class="p">]</span>  <span class="c1"># leniency</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">FetchedSet</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">urls</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">callback_function</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">f</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">fetch_threaded</span><span class="p">(</span><span class="n">urls</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">callback_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">error_handler</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># undocumented - warning. use at own risk</span>
        <span class="c1"># note - still blocks. just gets all before continuing using threads</span>
        <span class="c1"># problems - all urls can only have 1 associated callback, error and set of kwargs</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">urls</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">urls</span> <span class="o">=</span> <span class="p">[</span><span class="n">urls</span><span class="p">]</span>  <span class="c1"># leniency</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">FetchedSet</span><span class="p">()</span>
        <span class="n">jobs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">urls</span><span class="p">:</span>
            <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">window</span><span class="o">.</span><span class="n">_do_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="n">thread</span><span class="o">.</span><span class="n">setDaemon</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">jobs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
        <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">j</span><span class="p">:</span> <span class="n">j</span><span class="o">.</span><span class="n">start</span><span class="p">(),</span> <span class="n">jobs</span><span class="p">)</span>
        <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">j</span><span class="p">:</span> <span class="n">j</span><span class="o">.</span><span class="n">join</span><span class="p">(),</span> <span class="n">jobs</span><span class="p">)</span>
        <span class="c1"># f = FetchedSet()</span>
        <span class="k">return</span> <span class="n">f</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">fetch_pooled</span><span class="p">(</span><span class="n">urls</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">callback_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">error_handler</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># undocumented - warning. use at own risk</span>
        <span class="c1"># note - still blocks. just gets all before continuing using a pool</span>
        <span class="c1"># problems - all urls can only have 1 associated callback, error and set of kwargs</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">urls</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">urls</span> <span class="o">=</span> <span class="p">[</span><span class="n">urls</span><span class="p">]</span>  <span class="c1"># leniency</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">FetchedSet</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">_do_request_wrapper</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">obj</span><span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">]</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">obj</span><span class="p">[</span><span class="s1">&#39;f&#39;</span><span class="p">]</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="n">obj</span><span class="p">[</span><span class="s1">&#39;k&#39;</span><span class="p">]</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;callback_function&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">]</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;error_handler&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">]</span>
            <span class="n">window</span><span class="o">.</span><span class="n">_do_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="n">jobs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Pool</span><span class="p">()</span>
        <span class="n">urls</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="n">callback_function</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="n">error_handler</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">}</span> <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">urls</span><span class="p">]</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">_do_request_wrapper</span><span class="p">,</span> <span class="n">urls</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">f</span>

    <span class="c1"># def fetch_aysnc( urls: list, options={}, type=&quot;async&quot; ):</span>
        <span class="c1"># TODO - a version using async/await</span>

<div class="viewcode-block" id="Window.btoa"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Window.btoa">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">btoa</span><span class="p">(</span><span class="n">dataString</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Encodes a string in base-64 &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">base64</span>
        <span class="n">dataBytes</span> <span class="o">=</span> <span class="n">dataString</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="n">encoded</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">dataBytes</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">encoded</span></div>

<div class="viewcode-block" id="Window.atob"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Window.atob">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">atob</span><span class="p">(</span><span class="n">dataString</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Decodes a base-64 encoded string &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">base64</span>
        <span class="k">return</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">dataString</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span></div>

<div class="viewcode-block" id="Window.requestAnimationFrame"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Window.requestAnimationFrame">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">requestAnimationFrame</span><span class="p">(</span><span class="n">callback</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[requests a frame of an animation]</span>

<span class="sd">        Args:</span>
<span class="sd">            callback (callable): [the callback function]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [description]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">perf</span> <span class="o">=</span> <span class="n">Global</span><span class="o">.</span><span class="n">performance</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">callback</span><span class="p">(</span><span class="n">perf</span><span class="p">)</span></div></div>


<span class="c1"># these probably should have been on global. will see about moving them later</span>
<span class="n">setInterval</span> <span class="o">=</span> <span class="n">Window</span><span class="o">.</span><span class="n">setInterval</span>
<span class="n">clearInterval</span> <span class="o">=</span> <span class="n">Window</span><span class="o">.</span><span class="n">clearInterval</span>

<span class="n">Global</span><span class="o">.</span><span class="n">setInterval</span> <span class="o">=</span> <span class="n">Window</span><span class="o">.</span><span class="n">setInterval</span>
<span class="n">Global</span><span class="o">.</span><span class="n">clearInterval</span> <span class="o">=</span> <span class="n">Window</span><span class="o">.</span><span class="n">clearInterval</span>

<span class="n">window</span> <span class="o">=</span> <span class="n">Window</span>


<div class="viewcode-block" id="Array"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array">[docs]</a><span class="k">class</span> <span class="nc">Array</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; javascript array &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Array.from_"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.from_">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">from_</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>  <span class="c1"># TODO - test</span>
        <span class="sd">&quot;&quot;&quot; Creates a new Array instance from an array-like or iterable object. &quot;&quot;&quot;</span>
        <span class="c1"># return Array(object)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Array</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Array</span><span class="p">(</span><span class="o">*</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">items</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Array</span><span class="p">(</span><span class="o">*</span><span class="n">items</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">items</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
            <span class="k">return</span> <span class="n">Array</span><span class="p">(</span><span class="o">*</span><span class="n">items</span><span class="p">)</span>
        <span class="c1"># if it is iterable unpack it</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;__iter__&#39;</span><span class="p">):</span>
            <span class="n">items</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Array</span><span class="p">(</span><span class="o">*</span><span class="n">items</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Array</span><span class="p">([</span><span class="n">obj</span><span class="p">])</span></div>

<div class="viewcode-block" id="Array.of"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.of">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">of</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>  <span class="c1"># TODO - test</span>
        <span class="sd">&quot;&quot;&quot; Creates a new Array instance with a variable number of arguments,</span>
<span class="sd">        regardless of number or type of the arguments. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Array</span><span class="p">(</span><span class="n">args</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[An Array that behaves like a js array]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># casting</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">return</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">int</span><span class="p">):</span>
                <span class="c1"># self.args = [None] * args[0]</span>
                <span class="c1"># self.args = [null()] * args[0]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prototype</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="c1"># if its a list method get it from args</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;int not supported&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Array</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">+</span> <span class="n">value</span><span class="o">.</span><span class="n">args</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">+</span> <span class="n">value</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Array</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">args</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">==</span> <span class="n">other</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">i</span>
        <span class="c1"># self.args.__iter__()</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;int not supported&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Array</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">-</span> <span class="n">value</span><span class="o">.</span><span class="n">args</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">-</span> <span class="n">value</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span>

<div class="viewcode-block" id="Array.toString"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.toString">[docs]</a>    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Converts an array to a string, and returns the result &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>  <span class="c1"># TODO - check what js does</span></div>

<div class="viewcode-block" id="Array.toSource"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.toSource">[docs]</a>    <span class="k">def</span> <span class="nf">toSource</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the source array.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets or returns the number of elements in an array &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>

<div class="viewcode-block" id="Array.concat"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.concat">[docs]</a>    <span class="k">def</span> <span class="nf">concat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Joins two or more arrays, and returns a copy of the joined arrays]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [list]: [returns a copy of the joined arrays]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">+=</span> <span class="n">a</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span></div>

<div class="viewcode-block" id="Array.flat"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.flat">[docs]</a>    <span class="k">def</span> <span class="nf">flat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>  <span class="c1"># TODO - test</span>
        <span class="sd">&quot;&quot;&quot;[Flattens an array into a single-dimensional array or a depth of arrays]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">depth</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;depth must be greater than 0&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span>
        <span class="n">flat</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="n">flat</span> <span class="o">+=</span> <span class="n">i</span><span class="o">.</span><span class="n">flat</span><span class="p">(</span><span class="n">depth</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">flat</span></div>

<div class="viewcode-block" id="Array.flatMap"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.flatMap">[docs]</a>    <span class="k">def</span> <span class="nf">flatMap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn</span><span class="p">):</span>  <span class="c1"># TODO - test</span>
        <span class="sd">&quot;&quot;&quot;[Maps a function over an array and flattens the result]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Array</span><span class="p">(</span><span class="n">fn</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="Array.fill"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.fill">[docs]</a>    <span class="k">def</span> <span class="nf">fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Fills elements of an array from a start index to an end index with a static value]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span></div>

<div class="viewcode-block" id="Array.includes"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.includes">[docs]</a>    <span class="k">def</span> <span class="nf">includes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>  <span class="c1"># -&gt; bool:</span>
        <span class="sd">&quot;&quot;&quot;[Check if an array contains the specified item</span>

<span class="sd">        Args:</span>
<span class="sd">            value ([any]): [any value]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [bool]: [a boolean]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Array.indexOf"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.indexOf">[docs]</a>    <span class="k">def</span> <span class="nf">indexOf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Search the array for an element and returns its position &quot;&quot;&quot;</span>
        <span class="c1"># for count, each in enumerate(self.args):</span>
        <span class="c1">#     if each == value:</span>
        <span class="c1">#         return count</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># print(e)</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span></div>

<div class="viewcode-block" id="Array.isArray"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.isArray">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">isArray</span><span class="p">(</span><span class="n">thing</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Checks whether an object is an array]</span>

<span class="sd">        Args:</span>
<span class="sd">            thing ([type]): [thing to check]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [bool]: [True if the object is list, tuple or Array]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">thing</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">Array</span><span class="p">)):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Array.join"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.join">[docs]</a>    <span class="k">def</span> <span class="nf">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Joins all elements of an array into a string  &quot;&quot;&quot;</span>
        <span class="c1"># TODO - get passed param names</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">])</span></div>

<div class="viewcode-block" id="Array.lastIndexOf"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.lastIndexOf">[docs]</a>    <span class="k">def</span> <span class="nf">lastIndexOf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Search the array for an element, starting at the end, and returns its position &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># print(e)</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Array.pop"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.pop">[docs]</a>    <span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes the last element of an array, and returns that element &quot;&quot;&quot;</span>
        <span class="c1"># item = self.args[len(self.args)-1]</span>
        <span class="c1"># del self.args[len(self.args)-1]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span></div>

<div class="viewcode-block" id="Array.push"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.push">[docs]</a>    <span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds new elements to the end of an array, and returns the new length &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="Array.reverse"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.reverse">[docs]</a>    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Reverses the order of the elements in an array &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span></div>

<div class="viewcode-block" id="Array.slice"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.slice">[docs]</a>    <span class="k">def</span> <span class="nf">slice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Selects a part of an array, and returns the new array]</span>

<span class="sd">        Args:</span>
<span class="sd">            start ([int]): [index to slice from]</span>
<span class="sd">            stop ([int], optional): [index to slice to]. Defaults to end of the array.</span>
<span class="sd">            step (int, optional): [description]. Defaults to 1.</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [new array]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="nb">slice</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="p">)]</span></div>

<div class="viewcode-block" id="Array.splice"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.splice">[docs]</a>    <span class="k">def</span> <span class="nf">splice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">delete_count</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">items</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Selects a part of an array, and returns the new array &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">delete_count</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">delete_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span> <span class="o">-</span> <span class="n">start</span>

        <span class="n">total</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">delete_count</span>
        <span class="n">removed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">total</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">total</span><span class="p">]</span> <span class="o">=</span> <span class="n">items</span>
        <span class="k">return</span> <span class="n">removed</span></div>
        <span class="c1"># return self.args</span>

<div class="viewcode-block" id="Array.unshift"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.unshift">[docs]</a>    <span class="k">def</span> <span class="nf">unshift</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Adds new elements to the beginning of an array, and returns the new length]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [int]: [the length of the array]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="Array.shift"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.shift">[docs]</a>    <span class="k">def</span> <span class="nf">shift</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[removes the first element from an array and returns that removed element]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [the removed array element]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">item</span></div>

<div class="viewcode-block" id="Array.map"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.map">[docs]</a>    <span class="k">def</span> <span class="nf">map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Creates a new array with the result of calling a function for each array element]</span>

<span class="sd">        Args:</span>
<span class="sd">            func ([type]): [a function to call on each array element]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [list]: [a new array]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># print(func)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">func</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">]</span></div>
        <span class="c1"># return map(self.args, func)</span>

<div class="viewcode-block" id="Array.some"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.some">[docs]</a>    <span class="k">def</span> <span class="nf">some</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Checks if any of the elements in an array pass a test &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="Array.sort"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.sort">[docs]</a>    <span class="k">def</span> <span class="nf">sort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>  <span class="c1"># , *args, **kwargs):</span>
        <span class="sd">&quot;&quot;&quot; Sorts the elements of an array &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">func</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">))</span>

        <span class="k">def</span> <span class="nf">comp</span><span class="p">(</span><span class="n">o</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>

        <span class="c1"># manually sort lexicographically</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">comp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">comp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">j</span><span class="p">]):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span></div>

<div class="viewcode-block" id="Array.reduce"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.reduce">[docs]</a>    <span class="k">def</span> <span class="nf">reduce</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">initialValue</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Reduces the array to a single value (going left-to-right)</span>
<span class="sd">            callback recieve theses parameters: previousValue, currentValue, currentIndex, array</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span>
        <span class="k">if</span> <span class="n">initialValue</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">initialValue</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">arguments</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">arguments</span><span class="p">):</span>
            <span class="kn">import</span> <span class="nn">inspect</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="n">initialValue</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">initialValue</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">arguments</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">initialValue</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">initialValue</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">initialValue</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">initialValue</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">initialValue</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">initialValue</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Callback does not have the correct number of parameters&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">initialValue</span></div>

<div class="viewcode-block" id="Array.reduceRight"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.reduceRight">[docs]</a>    <span class="k">def</span> <span class="nf">reduceRight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">initialValue</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Reduces the array to a single value (going right-to-left)</span>
<span class="sd">            callback recieve theses parameters: previousValue, currentValue, currentIndex, array</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span>
        <span class="k">if</span> <span class="n">initialValue</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">initialValue</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">arguments</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">arguments</span><span class="p">)):</span>
            <span class="kn">import</span> <span class="nn">inspect</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="n">initialValue</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">initialValue</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">arguments</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">initialValue</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">initialValue</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">initialValue</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">initialValue</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">initialValue</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">initialValue</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Callback does not have the correct number of parameters&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">initialValue</span></div>

<div class="viewcode-block" id="Array.filter"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.filter">[docs]</a>    <span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new array with every element in an array that pass a test</span>
<span class="sd">        i.e. even_numbers = someArr.filter( lambda x: x % 2 == 0 )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># written by .ai (https://6b.eleuther.ai/)</span>
        <span class="c1"># filtered = []</span>
        <span class="c1"># for value in self.args:</span>
        <span class="c1">#     if func(value):</span>
        <span class="c1">#         filtered.append(value)</span>
        <span class="c1"># return filtered</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">))</span></div>

<div class="viewcode-block" id="Array.find"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.find">[docs]</a>    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the value of the first element in an array that pass a test &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">func</span><span class="p">(</span><span class="n">each</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">each</span></div>

<div class="viewcode-block" id="Array.findIndex"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.findIndex">[docs]</a>    <span class="k">def</span> <span class="nf">findIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the index of the first element in an array that pass a test &quot;&quot;&quot;</span>
        <span class="c1"># written by .ai (https://6b.eleuther.ai/)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">i</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span></div>

<div class="viewcode-block" id="Array.forEach"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.forEach">[docs]</a>    <span class="k">def</span> <span class="nf">forEach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Calls a function for each array element &quot;&quot;&quot;</span>
        <span class="c1"># written by .ai (https://6b.eleuther.ai/)</span>
        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="n">func</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="Array.keys"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.keys">[docs]</a>    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a Array Iteration Object, containing the keys of the original array &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">i</span></div>

<div class="viewcode-block" id="Array.copyWithin"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.copyWithin">[docs]</a>    <span class="k">def</span> <span class="nf">copyWithin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Copies array elements within the array, from start to end &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">target</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></div>

<div class="viewcode-block" id="Array.entries"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.entries">[docs]</a>    <span class="k">def</span> <span class="nf">entries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Returns a key/value pair Array Iteration Object]</span>

<span class="sd">        Yields:</span>
<span class="sd">            [type]: [key/value pair]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">yield</span> <span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span></div>

<div class="viewcode-block" id="Array.every"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.every">[docs]</a>    <span class="k">def</span> <span class="nf">every</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Checks if every element in an array pass a test]</span>

<span class="sd">        Args:</span>
<span class="sd">            func ([type]): [test function]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [bool]: [if every array elemnt passed the test]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="Array.at"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Array.at">[docs]</a>    <span class="k">def</span> <span class="nf">at</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[takes an integer value and returns the item at that index,</span>
<span class="sd">        allowing for positive and negative integers.</span>
<span class="sd">        Negative integers count back from the last item in the array.]</span>

<span class="sd">        Args:</span>
<span class="sd">            index ([type]): [position of item]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [item at the given position]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">index</span><span class="p">]</span></div></div>


<span class="n">Array</span><span class="o">.</span><span class="n">prototype</span> <span class="o">=</span> <span class="n">Array</span>


<span class="k">class</span> <span class="nc">Set</span><span class="p">():</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[The Set object lets you store unique values of any type, whether primitive values or object references.</span>

<span class="sd">        TODO - will need to store dictionaries unlike a python set</span>
<span class="sd">        https://stackoverflow.com/questions/34097959/add-a-dictionary-to-a-set-with-union</span>

<span class="sd">        ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">species</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; The constructor function that is used to create derived objects. &quot;&quot;&quot;</span>
        <span class="c1"># return self.args</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the number of values in the Set object. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Appends value to the Set object. Returns the Set object with added value. &quot;&quot;&quot;</span>
        <span class="c1"># print(type(self.args), value)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes all elements from the Set object. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes the element associated to the value</span>
<span class="sd">        returns a boolean asserting whether an element was successfully removed or not. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">has</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a boolean asserting whether an element is present with the given value in the Set object or not. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span>

    <span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a boolean asserting whether an element is present with the given value in the Set object or not. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span>

    <span class="c1"># Set.prototype[@@iterator]()</span>
    <span class="c1"># Returns a new iterator object that yields the values for each element in the Set object in insertion order.</span>

    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a new iterator object that yields the values for each element</span>
<span class="sd">        in the Set object in insertion order. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>

    <span class="c1"># def keys(self):</span>
    <span class="c1">#     &quot;&quot;&quot; An alias for values &quot;&quot;&quot; #?</span>
    <span class="c1">#     return self.values()</span>

    <span class="k">def</span> <span class="nf">entries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a new iterator object that contains an array of [value, value] for each element in the Set object,</span>
<span class="sd">        in insertion order. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">([[</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">])</span>
        <span class="c1"># This is similar to the Map object, so that each entry&#39;s key is the same as its value for a Set.</span>

    <span class="k">def</span> <span class="nf">forEach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callbackFn</span><span class="p">,</span> <span class="n">thisArg</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Calls callbackFn once for each value present in the Set object, in insertion order.</span>
<span class="sd">        If a thisArg parameter is provided, it will be used as the this value for each invocation of callbackFn.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="n">callbackFn</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">thisArg</span><span class="p">)</span>


<div class="viewcode-block" id="Number"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Number">[docs]</a><span class="k">class</span> <span class="nc">Number</span><span class="p">(</span><span class="nb">float</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; javascript Number methods &quot;&quot;&quot;</span>

    <span class="c1"># print(sys.float_info)</span>
    <span class="n">MAX_VALUE</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">float_info</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">MIN_VALUE</span> <span class="o">=</span> <span class="mf">5E-324</span>  <span class="c1"># CHANGE no longer &gt;  list(sys.float_info)[3]</span>

    <span class="n">NEGATIVE_INFINITY</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">)</span>  <span class="c1">#: Represents negative infinity (returned on overflow) Number</span>
    <span class="n">POSITIVE_INFINITY</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;-inf&quot;</span><span class="p">)</span>  <span class="c1">#: Represents infinity (returned on overflow)  Number</span>

    <span class="c1"># prototype Allows you to add properties and methods to an object   Number</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">Global</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">other</span>

    <span class="k">def</span> <span class="nf">__div__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">/</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__mod__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">%</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__pow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">**</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span>

    <span class="k">def</span> <span class="fm">__pos__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span>

    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__invert__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="o">~</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">!=</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__and__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&amp;</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__or__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">|</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__xor__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">^</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__lshift__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__rshift__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__isub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">other</span>

    <span class="k">def</span> <span class="nf">__idiv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">/</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__imod__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">%</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__ipow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">**</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__ilshift__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__irshift__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__iand__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&amp;</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__ior__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">|</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__ixor__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">^</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__floordiv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">//</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__rfloordiv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">other</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>

    <span class="k">def</span> <span class="fm">__ifloordiv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">other</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>

    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">/</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__rtruediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">other</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>

    <span class="k">def</span> <span class="fm">__itruediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">other</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>

    <span class="k">def</span> <span class="fm">__rmod__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">other</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>

<div class="viewcode-block" id="Number.isInteger"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Number.isInteger">[docs]</a>    <span class="k">def</span> <span class="nf">isInteger</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Checks whether a value is an integer &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">)</span></div>

<div class="viewcode-block" id="Number.isSafeInteger"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Number.isSafeInteger">[docs]</a>    <span class="k">def</span> <span class="nf">isSafeInteger</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Checks whether a value is a safe integer &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Number.toExponential"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Number.toExponential">[docs]</a>    <span class="k">def</span> <span class="nf">toExponential</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Converts a number into an exponential notation &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">num</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">exp</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{:e}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Number</span><span class="p">(</span><span class="n">Number</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">toFixed</span><span class="p">(</span><span class="n">num</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">exp</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{:e}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;e&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">):</span>
            <span class="n">exp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># python already converts.</span>

        <span class="n">n</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;00&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="s2">&quot;0.&quot;</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>

        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">10</span><span class="p">:</span>  <span class="c1"># TODO - not correct. lazy way to strip left 0s only</span>
                <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="c1"># print(  &quot;AND:&quot;, n, &quot;e&quot; , e )</span>
        <span class="k">if</span> <span class="n">n</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">):</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">n</span> <span class="o">+</span> <span class="s2">&quot;e&quot;</span> <span class="o">+</span> <span class="n">e</span></div>

<div class="viewcode-block" id="Number.toFixed"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Number.toFixed">[docs]</a>    <span class="k">def</span> <span class="nf">toFixed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">digits</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[formats a number using fixed-point notation.]</span>

<span class="sd">        Args:</span>
<span class="sd">            digits ([int]): [The number of digits to appear after the decimal point</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [A string representing the given number using fixed-point notation.]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># print(&quot;DIGIT!&quot;, digits)</span>
        <span class="k">if</span> <span class="n">digits</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">digits</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">fstring</span> <span class="o">=</span> <span class="s2">&quot;{:.&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">digits</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;f}&quot;</span>
        <span class="k">return</span> <span class="n">fstring</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">digits</span><span class="p">))</span></div>

<div class="viewcode-block" id="Number.toPrecision"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Number.toPrecision">[docs]</a>    <span class="k">def</span> <span class="nf">toPrecision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">precision</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[returns a string representing the Number object to the specified precision.]</span>

<span class="sd">        Args:</span>
<span class="sd">            precision ([int]): [An integer specifying the number of significant digits.]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [A string representing a Number object in fixed-point</span>
<span class="sd">            or exponential notation rounded to precision significant digits]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">precision</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">precision</span><span class="p">)</span>
        <span class="c1"># return str(math.pow(self.x, precision))</span>
        <span class="c1"># raise NotImplementedError</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">precision</span><span class="p">))</span></div>

<div class="viewcode-block" id="Number.toString"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Number.toString">[docs]</a>    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[returns a string representing the specified Number object.]</span>

<span class="sd">        Args:</span>
<span class="sd">            base (int): [An integer in the range 2 through 36</span>
<span class="sd">                specifying the base to use for representing numeric values.]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [a string representing the specified Number object]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">base</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

        <span class="kn">import</span> <span class="nn">string</span>
        <span class="n">digs</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">digits</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">ascii_letters</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">sign</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">digs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sign</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*=</span> <span class="n">sign</span>
        <span class="n">digits</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">:</span>
            <span class="n">digits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">digs</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">%</span> <span class="n">base</span><span class="p">)])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">/</span> <span class="n">base</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">sign</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">digits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>

        <span class="n">digits</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>

        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">digits</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="String"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String">[docs]</a><span class="k">class</span> <span class="nc">String</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; javascript String methods &quot;&quot;&quot;</span>

<div class="viewcode-block" id="String.fromCodePoint"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.fromCodePoint">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">fromCodePoint</span><span class="p">(</span><span class="n">codePoint</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Converts a Unicode code point into a string &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">chr</span><span class="p">(</span><span class="n">codePoint</span><span class="p">)</span></div>

<div class="viewcode-block" id="String.toCodePoint"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.toCodePoint">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">toCodePoint</span><span class="p">(</span><span class="n">char</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Converts a Unicode string into a code point &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">ord</span><span class="p">(</span><span class="n">char</span><span class="p">)</span></div>

<div class="viewcode-block" id="String.raw"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.raw">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">raw</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the string as-is &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">re</span>
        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">string</span><span class="p">)</span></div>

    <span class="c1"># @staticmethod</span>
    <span class="c1"># def fromCharCode(code: int):</span>
    <span class="c1">#     &quot;&quot;&quot; Converts a Unicode code point into a string &quot;&quot;&quot;</span>
    <span class="c1">#     return chr(code)</span>

<div class="viewcode-block" id="String.toCharCode"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.toCharCode">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">toCharCode</span><span class="p">(</span><span class="n">char</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Converts a Unicode string into a code point &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">ord</span><span class="p">(</span><span class="n">char</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># self.args = args</span>
        <span class="c1"># self.kwargs = kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="n">other</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">String</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># def __repr__(self):</span>
    <span class="c1">#     return self.x</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="c1"># print(item)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">item</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">other</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>

    <span class="k">def</span> <span class="fm">__isub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

<div class="viewcode-block" id="String.split"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.split">[docs]</a>    <span class="k">def</span> <span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[can split a string based on a regex]</span>

<span class="sd">        Args:</span>
<span class="sd">            expr ([str]): [valid regex or string to split on]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [list]: [list of str]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># if isinstance( expr, RegExp)</span>

        <span class="kn">import</span> <span class="nn">re</span>
        <span class="c1"># print( &#39;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;.&#39;, type(expr) )</span>
        <span class="n">is_regex</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
            <span class="n">is_regex</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
            <span class="n">is_regex</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">is_regex</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span></div>

<div class="viewcode-block" id="String.concat"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.concat">[docs]</a>    <span class="k">def</span> <span class="nf">concat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">seperator</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[concatenates the string arguments to the calling string and returns a new string.]</span>

<span class="sd">        Args:</span>
<span class="sd">            seperator (str, optional): []. Defaults to &quot;&quot;.</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [A new string containing the combined text of the strings provided.]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">seperator</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">)</span></div>

    <span class="c1"># @staticmethod</span>
<div class="viewcode-block" id="String.charCodeAt"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.charCodeAt">[docs]</a>    <span class="k">def</span> <span class="nf">charCodeAt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the Unicode of the character at the specified index &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">ord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">index</span><span class="p">])</span></div>

    <span class="c1"># @staticmethod</span>
<div class="viewcode-block" id="String.fromCharCode"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.fromCharCode">[docs]</a>    <span class="k">def</span> <span class="nf">fromCharCode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">codes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns a string created from the specified sequence of UTF-16 code units &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">codes</span><span class="p">])</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

<div class="viewcode-block" id="String.repeat"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.repeat">[docs]</a>    <span class="k">def</span> <span class="nf">repeat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a new string with a specified number of copies of an existing string &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">count</span></div>

<div class="viewcode-block" id="String.startsWith"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.startsWith">[docs]</a>    <span class="k">def</span> <span class="nf">startsWith</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Checks whether a string begins with specified characters &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="c1"># print(self.x.startswith(x, start, end))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span></div>

<div class="viewcode-block" id="String.substring"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.substring">[docs]</a>    <span class="k">def</span> <span class="nf">substring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Extracts the characters from a string, between two specified indices &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">start</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span></div>

<div class="viewcode-block" id="String.endsWith"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.endsWith">[docs]</a>    <span class="k">def</span> <span class="nf">endsWith</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Checks whether a string ends with specified string/characters &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span></div>

<div class="viewcode-block" id="String.toLowerCase"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.toLowerCase">[docs]</a>    <span class="k">def</span> <span class="nf">toLowerCase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Converts a string to lowercase letters &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span></div>

<div class="viewcode-block" id="String.toUpperCase"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.toUpperCase">[docs]</a>    <span class="k">def</span> <span class="nf">toUpperCase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Converts a string to uppercase letters &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span></div>

<div class="viewcode-block" id="String.slice"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.slice">[docs]</a>    <span class="k">def</span> <span class="nf">slice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Selects a part of an string, and returns the new string &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span></div>

<div class="viewcode-block" id="String.trim"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.trim">[docs]</a>    <span class="k">def</span> <span class="nf">trim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes whitespace from both ends of a string &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span></div>

<div class="viewcode-block" id="String.charAt"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.charAt">[docs]</a>    <span class="k">def</span> <span class="nf">charAt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Returns the character at the specified index (position)]</span>

<span class="sd">        Args:</span>
<span class="sd">            index (int): [index position]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [character]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">index</span><span class="p">]</span></div>

<div class="viewcode-block" id="String.replace"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.replace">[docs]</a>    <span class="k">def</span> <span class="nf">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">old</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">new</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches a string for a specified value, or a regular expression,</span>
<span class="sd">        and returns a new string where the specified values are replaced.</span>
<span class="sd">        only replaces first one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">new</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">new</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">old</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span></div>
        <span class="c1"># re.sub(r&quot;regepx&quot;, &quot;old&quot;, &quot;new&quot;) # TODO - js one also takes a regex</span>

<div class="viewcode-block" id="String.replaceAll"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.replaceAll">[docs]</a>    <span class="k">def</span> <span class="nf">replaceAll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">old</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">new</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[returns a new string where the specified values are replaced. ES2021]</span>

<span class="sd">        Args:</span>
<span class="sd">            old ([str]): [word to remove]</span>
<span class="sd">            new ([str]): [word to replace it with]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [new string with all occurences of old word replaced]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span></div>

    <span class="c1"># def localeCompare():</span>
    <span class="c1"># &quot;&quot;&quot; Compares two strings in the current locale &quot;&quot;&quot;</span>
    <span class="c1"># pass</span>

<div class="viewcode-block" id="String.substr"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.substr">[docs]</a>    <span class="k">def</span> <span class="nf">substr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Extracts the characters from a string, beginning at a specified start position,</span>
<span class="sd">        and through the specified number of character &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">start</span> <span class="o">+</span> <span class="n">end</span><span class="p">]</span></div>

<div class="viewcode-block" id="String.toLocaleLowerCase"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.toLocaleLowerCase">[docs]</a>    <span class="k">def</span> <span class="nf">toLocaleLowerCase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Converts a string to lowercase letters, according to the host&#39;s locale &quot;&quot;&quot;</span>
        <span class="c1"># locale.setlocale()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span></div>

<div class="viewcode-block" id="String.toLocaleUpperCase"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.toLocaleUpperCase">[docs]</a>    <span class="k">def</span> <span class="nf">toLocaleUpperCase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Converts a string to uppercase letters, according to the host&#39;s locale &quot;&quot;&quot;</span>
        <span class="c1"># locale.setlocale()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span></div>

<div class="viewcode-block" id="String.indexOf"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.indexOf">[docs]</a>    <span class="k">def</span> <span class="nf">indexOf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">searchValue</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">fromIndex</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[returns the index within the calling String object of the first occurrence of the specified value,</span>
<span class="sd">        starting the search at fromIndex ]</span>

<span class="sd">        Args:</span>
<span class="sd">            searchValue (str): [The string value to search for.]</span>
<span class="sd">            fromIndex (int): [An integer representing the index at which to start the search]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [The index of the first occurrence of searchValue, or -1 if not found.]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">searchValue</span><span class="p">,</span> <span class="n">fromIndex</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span></div>

<div class="viewcode-block" id="String.codePointAt"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.codePointAt">[docs]</a>    <span class="k">def</span> <span class="nf">codePointAt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Returns the Unicode code point at the specified index (position)]</span>

<span class="sd">        Args:</span>
<span class="sd">            index (int): [index position]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [the Unicode code point at the specified index (position)]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">ord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">index</span><span class="p">])</span></div>

<div class="viewcode-block" id="String.padEnd"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.padEnd">[docs]</a>    <span class="k">def</span> <span class="nf">padEnd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">padChar</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Pads the end of a string with a specified character</span>
<span class="sd">        (repeated, if needed) to create a new string.]</span>

<span class="sd">        Args:</span>
<span class="sd">            length (int): [the length of the resulting string]</span>
<span class="sd">            padChar (str, optional): [the character to use for padding. Defaults to &quot; &quot;].</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the padded string]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">padChar</span> <span class="o">*</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)))</span></div>

<div class="viewcode-block" id="String.padStart"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.padStart">[docs]</a>    <span class="k">def</span> <span class="nf">padStart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">padChar</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Pads the start of a string with a specified character]</span>

<span class="sd">        Args:</span>
<span class="sd">            length (int): [the length of the resulting string]</span>
<span class="sd">            padChar (str, optional): [the character to use for padding. Defaults to &quot; &quot;].</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the padded string]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">padChar</span> <span class="o">*</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">))</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span></div>

<div class="viewcode-block" id="String.localeCompare"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.localeCompare">[docs]</a>    <span class="k">def</span> <span class="nf">localeCompare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">comparisonString</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">locale</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; method returns a number indicating whether a reference string comes before,</span>
<span class="sd">            or after, or is the same as the given string in sort order &quot;&quot;&quot;</span>
        <span class="c1"># if locale is None:</span>
        <span class="c1">#     locale = self.locale</span>
        <span class="c1"># return locale.strcoll(self.x, comparisonString, *args)</span>
        <span class="c1"># pass</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="String.trimStart"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.trimStart">[docs]</a>    <span class="k">def</span> <span class="nf">trimStart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>  <span class="c1"># TODO - huh?. length </span>
        <span class="sd">&quot;&quot;&quot;[Removes whitespace from the beginning of a string.]</span>

<span class="sd">        Args:</span>
<span class="sd">            length (int): [the length of the resulting string]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the trimmed string]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span></div>

<div class="viewcode-block" id="String.trimEnd"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.trimEnd">[docs]</a>    <span class="k">def</span> <span class="nf">trimEnd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>  <span class="c1"># TODO - huh?. length </span>
        <span class="sd">&quot;&quot;&quot;[Removes whitespace from the end of a string]</span>

<span class="sd">        Args:</span>
<span class="sd">            length (int): [the length of the resulting string]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [the trimmed string]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span></div>

<div class="viewcode-block" id="String.includes"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.includes">[docs]</a>    <span class="k">def</span> <span class="nf">includes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">searchValue</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[returns true if the specified string is found within the calling String object,]</span>

<span class="sd">        Args:</span>
<span class="sd">            searchValue (str): [The string value to search for.]</span>
<span class="sd">            position (int, optional): [the position to search from]. Defaults to 0.</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [a boolean value indicating whether the search value was found.]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">searchValue</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">position</span><span class="p">:]</span></div>

<div class="viewcode-block" id="String.search"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.search">[docs]</a>    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">searchValue</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[returns true if the specified string is found within the calling String object,]</span>
<span class="sd">        starting at the specified position.</span>
<span class="sd">        Args:</span>
<span class="sd">            searchValue (str): [The string value to search for.]</span>
<span class="sd">            position (int, optional): [the position to search from]. Defaults to 0.</span>
<span class="sd">        Returns:</span>
<span class="sd">            [type]: [a boolean value indicating whether the search value was found.]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">searchValue</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">position</span><span class="p">:]</span></div>

<div class="viewcode-block" id="String.matchAll"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.matchAll">[docs]</a>    <span class="k">def</span> <span class="nf">matchAll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches a string for a specified value, or a regular expression,</span>
<span class="sd">        and returns a new string where the specified values are replaced.</span>
<span class="sd">        only replaces first one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span></div>

<div class="viewcode-block" id="String.match"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.match">[docs]</a>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches a string for a specified value, or a regular expression,</span>
<span class="sd">        and returns a new string where the specified values are replaced.</span>
<span class="sd">        only replaces first one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span></div>

<div class="viewcode-block" id="String.compile"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.compile">[docs]</a>    <span class="k">def</span> <span class="nf">compile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches a string for a specified value, or a regular expression,</span>
<span class="sd">        and returns a new string where the specified values are replaced.</span>
<span class="sd">        only replaces first one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span></div>

<div class="viewcode-block" id="String.lastIndexOf"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.lastIndexOf">[docs]</a>    <span class="k">def</span> <span class="nf">lastIndexOf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">searchValue</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">fromIndex</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        returns the last index within the calling String object of the first occurrence of the specified value,</span>
<span class="sd">        starting the search at fromIndex</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">rindex</span><span class="p">(</span><span class="n">searchValue</span><span class="p">,</span> <span class="n">fromIndex</span><span class="p">)</span></div>

    <span class="c1"># def test(self, pattern: str):? was this on string?</span>

    <span class="c1"># TODO - test all these</span>
    <span class="k">def</span> <span class="nf">anchor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="c1"># from domonic.html import a</span>
        <span class="c1"># return a(str(self), _name=name)  #TODO - no href bug</span>
        <span class="k">return</span> <span class="s1">&#39;&lt;a name=&quot;</span><span class="si">{}</span><span class="s1">&quot;&gt;</span><span class="si">{}</span><span class="s1">&lt;/a&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

<div class="viewcode-block" id="String.big"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.big">[docs]</a>    <span class="k">def</span> <span class="nf">big</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[wraps the string in big tags]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the string in big tags]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;big&gt;&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="s2">&quot;&lt;/big&gt;&quot;</span></div>

<div class="viewcode-block" id="String.blink"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.blink">[docs]</a>    <span class="k">def</span> <span class="nf">blink</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[wraps the string in blink tags]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the string in blink tags]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;blink&gt;&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="s2">&quot;&lt;/blink&gt;&quot;</span></div>

<div class="viewcode-block" id="String.bold"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.bold">[docs]</a>    <span class="k">def</span> <span class="nf">bold</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[wraps the string in bold tags]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the string in bold tags]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;b&gt;&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="s2">&quot;&lt;/b&gt;&quot;</span></div>

<div class="viewcode-block" id="String.fixed"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.fixed">[docs]</a>    <span class="k">def</span> <span class="nf">fixed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[wraps the string in fixed tags]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the string in fixed tags]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;tt&gt;&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="s2">&quot;&lt;/tt&gt;&quot;</span></div>

<div class="viewcode-block" id="String.fontcolor"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.fontcolor">[docs]</a>    <span class="k">def</span> <span class="nf">fontcolor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[wraps the string in font tags with a specified color]</span>

<span class="sd">        Args:</span>
<span class="sd">            color (str): [the color to use]</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the string in font tags]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;font color=&quot;</span> <span class="o">+</span> <span class="n">color</span> <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="s2">&quot;&lt;/font&gt;&quot;</span></div>

<div class="viewcode-block" id="String.fontsize"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.fontsize">[docs]</a>    <span class="k">def</span> <span class="nf">fontsize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[wraps the string in font tags with a specified size]</span>

<span class="sd">        Args:</span>
<span class="sd">            size (str): [the size to use]</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the string in font tags]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;font size=&quot;</span> <span class="o">+</span> <span class="n">size</span> <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="s2">&quot;&lt;/font&gt;&quot;</span></div>

<div class="viewcode-block" id="String.italics"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.italics">[docs]</a>    <span class="k">def</span> <span class="nf">italics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[wraps the string in italics tags]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the string in italics tags]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;i&gt;&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="s2">&quot;&lt;/i&gt;&quot;</span></div>

<div class="viewcode-block" id="String.link"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.link">[docs]</a>    <span class="k">def</span> <span class="nf">link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[wraps the string in a link tag]</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str): [the url to use]</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the string in a link tag]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;a href=&quot;</span> <span class="o">+</span> <span class="n">url</span> <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="s2">&quot;&lt;/a&gt;&quot;</span></div>

<div class="viewcode-block" id="String.small"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.small">[docs]</a>    <span class="k">def</span> <span class="nf">small</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[wraps the string in small tags]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the string in small tags]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;small&gt;&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="s2">&quot;&lt;/small&gt;&quot;</span></div>

<div class="viewcode-block" id="String.strike"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.strike">[docs]</a>    <span class="k">def</span> <span class="nf">strike</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[wraps the string in strike tags]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the string in strike tags]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;strike&gt;&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="s2">&quot;&lt;/strike&gt;&quot;</span></div>

<div class="viewcode-block" id="String.sub"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.sub">[docs]</a>    <span class="k">def</span> <span class="nf">sub</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[wraps the string in sub tags]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the string in sub tags]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;sub&gt;&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="s2">&quot;&lt;/sub&gt;&quot;</span></div>

<div class="viewcode-block" id="String.sup"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.sup">[docs]</a>    <span class="k">def</span> <span class="nf">sup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[wraps the string in sup tags]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the string in sup tags]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;sup&gt;&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="s2">&quot;&lt;/sup&gt;&quot;</span></div>

<div class="viewcode-block" id="String.div"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.div">[docs]</a>    <span class="k">def</span> <span class="nf">div</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[wraps the string in a div tag]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the string in a div tag]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">domonic.html</span> <span class="kn">import</span> <span class="n">div</span>
        <span class="k">return</span> <span class="n">div</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="String.webpage"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.String.webpage">[docs]</a>    <span class="k">def</span> <span class="nf">webpage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[wraps the string in a webpage]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: [the string as a webpage]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">domonic.html</span> <span class="kn">import</span> <span class="n">html</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">head</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">script</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span> <span class="n">link</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">h1</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">html</span><span class="p">(</span>
            <span class="n">head</span><span class="p">(</span>
                <span class="n">title</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">),</span>
                <span class="n">script</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="n">style</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="n">meta</span><span class="p">(</span><span class="n">_charset</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">),</span>
                <span class="n">link</span><span class="p">(</span><span class="n">_rel</span><span class="o">=</span><span class="s2">&quot;stylesheet&quot;</span><span class="p">,</span> <span class="n">_href</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="p">),</span>
            <span class="n">body</span><span class="p">(</span>
                <span class="n">h1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">),</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">content</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span> <span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        lets you transform a string into a dom element</span>
<span class="sd">        with the string as the content.</span>

<span class="sd">        also accepts a list of kwargs to pass as attributes</span>

<span class="sd">        i.e</span>
<span class="sd">        &gt;&gt;&gt; test = String(&quot;time to take a mo&quot;)</span>
<span class="sd">        &gt;&gt;&gt; test(&#39;div&#39;, _style=&quot;font-color:red;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; str(test(&#39;div&#39;, _style=&quot;font-color:red;&quot;))</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">domonic.dom</span> <span class="kn">import</span> <span class="n">Document</span>
        <span class="k">return</span> <span class="n">Document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<span class="k">class</span> <span class="nc">RegExp</span><span class="p">():</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expression</span> <span class="o">=</span> <span class="n">expression</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">flags</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>  <span class="c1">#: A string that contains the flags of the RegExp object.</span>
        <span class="c1"># self.multiline  # Whether or not to search in strings across multiple lines.</span>
        <span class="c1"># self.source  # The text of the pattern.</span>
        <span class="c1"># self.sticky  # Whether or not the search is sticky</span>
        <span class="c1"># self.lastIndex  # The index at which to start the next match.</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dotAll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Whether . matches newlines or not.]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [bool]: [True if dot matches newlines, False otherwise]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;s&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span>

    <span class="nd">@dotAll</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">dotAll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Whether . matches newlines or not.]</span>
<span class="sd">        Args:</span>
<span class="sd">            value (bool): [True if dot matches newlines, False otherwise]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;s&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">flags</span> <span class="o">+=</span> <span class="s2">&quot;s&quot;</span> <span class="k">if</span> <span class="n">value</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">multiline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Whether . matches newlines or not.]</span>
<span class="sd">        Returns:</span>
<span class="sd">            [bool]: [True if dot matches newlines, False otherwise]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;m&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span>

    <span class="nd">@multiline</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">multiline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Whether . matches newlines or not.]</span>
<span class="sd">        Args:</span>
<span class="sd">            value (bool): [True if dot matches newlines, False otherwise]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;m&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">flags</span> <span class="o">+=</span> <span class="s2">&quot;m&quot;</span> <span class="k">if</span> <span class="n">value</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[The text of the pattern.]</span>
<span class="sd">        Returns:</span>
<span class="sd">            [str]: [The text of the pattern.]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">expression</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">global_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Whether to test the regular expression against all possible matches in a string,</span>
<span class="sd">        or only against the first.]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [bool]: [True if global, False otherwise]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;g&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span>

    <span class="nd">@global_</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">global_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Whether to test the regular expression against all possible matches in a string,</span>
<span class="sd">        or only against the first.]</span>
<span class="sd">        Args:</span>
<span class="sd">            value (bool): [True if global, False otherwise]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;g&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">flags</span> <span class="o">+=</span> <span class="s2">&quot;g&quot;</span> <span class="k">if</span> <span class="n">value</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hasIndices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Whether the regular expression result exposes the start and end indices of captured substrings.]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [bool]: [True if hasIndices, False otherwise]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;d&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span>

    <span class="nd">@hasIndices</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">hasIndices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Whether the regular expression result exposes the start and end indices of captured substrings.]</span>
<span class="sd">        Args:</span>
<span class="sd">            value (bool): [True if hasIndices, False otherwise]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;d&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">flags</span> <span class="o">+=</span> <span class="s2">&quot;d&quot;</span> <span class="k">if</span> <span class="n">value</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ignoreCase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Whether to ignore case while attempting a match in a string.]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [bool]: [True if ignoreCase, False otherwise]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;i&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span>

    <span class="nd">@ignoreCase</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">ignoreCase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Whether to ignore case while attempting a match in a string.]</span>
<span class="sd">        Args:</span>
<span class="sd">            value (bool): [True if ignoreCase, False otherwise]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;i&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">flags</span> <span class="o">+=</span> <span class="s2">&quot;i&quot;</span> <span class="k">if</span> <span class="n">value</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">unicode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Whether or not Unicode features are enabled.]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [bool]: [True if unicode, False otherwise]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;u&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span>

    <span class="nd">@unicode</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">unicode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Whether or not Unicode features are enabled.]</span>
<span class="sd">        Args:</span>
<span class="sd">            value (bool): [True if unicode, False otherwise]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;u&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">flags</span> <span class="o">+=</span> <span class="s2">&quot;u&quot;</span> <span class="k">if</span> <span class="n">value</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">compile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; (Re-)compiles a regular expression during execution of a script. &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">exec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Executes a search for a match in its string parameter. &quot;&quot;&quot;</span>
        <span class="c1"># print(&quot;exec:&quot;, self.expression, s)</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">expression</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="c1"># print(m)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">groups</span><span class="p">()]</span>

    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Tests for a match in its string parameter.]</span>

<span class="sd">        Args:</span>
<span class="sd">            s (str): [a string to match]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [bool]: [True if match else False]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">expression</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="c1"># print(m)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a string representation of the RegExp object. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot; Returns a string representing the specified object.</span>
<span class="sd">        Overrides the Object.prototype.toString() method. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">expression</span>

    <span class="c1"># def [@@match]()</span>
    <span class="c1"># Performs match to given string and returns match result.</span>
    <span class="c1"># def [@@matchAll]()</span>
    <span class="c1"># Returns all matches of the regular expression against a string.</span>
    <span class="c1"># def [@@replace]()</span>
    <span class="c1"># Replaces matches in given string with new substring.</span>
    <span class="c1"># def [@@search]()</span>
    <span class="c1"># Searches the match in given string and returns the index the pattern found in the string.</span>
    <span class="c1"># def [@@split]()</span>
    <span class="c1"># Splits given string into an array by separating the strin</span>


<span class="c1"># https://developer.mozilla.org/en-US/docs/Web/API/URL</span>

<div class="viewcode-block" id="URL"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.URL">[docs]</a><span class="k">class</span> <span class="nc">URL</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; a-tag extends from URL &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__update__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># print( &quot;update URL:&quot;, type(self), self  )</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># make obj with all old props</span>
            <span class="n">new</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;protocol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">scheme</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;hostname&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">hostname</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">geturl</span><span class="p">()</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;port&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">port</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;host&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>  <span class="c1"># self.url.hostname</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;pathname&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;hash&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>  <span class="c1"># self.url.hash</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;search&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>  <span class="c1"># self.url.hash</span>

            <span class="c1"># update it with all the new ones</span>
            <span class="n">new</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;protocol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;hostname&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hostname</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">href</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;port&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;host&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;pathname&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathname</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;hash&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span>  <span class="c1"># self.hash</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;search&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search</span>  <span class="c1"># self.url.query</span>
            <span class="n">new</span><span class="p">[</span><span class="s1">&#39;_searchParams&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_searchParams</span>  <span class="c1"># URLSearchParams(self.url.query)</span>
            <span class="c1"># NOTE - rebuild happening here</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlsplit</span><span class="p">(</span>
                <span class="n">new</span><span class="p">[</span><span class="s1">&#39;protocol&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;://&quot;</span> <span class="o">+</span> <span class="n">new</span><span class="p">[</span><span class="s1">&#39;host&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">new</span><span class="p">[</span><span class="s1">&#39;pathname&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">new</span><span class="p">[</span><span class="s1">&#39;hash&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">new</span><span class="p">[</span><span class="s1">&#39;search&#39;</span><span class="p">])</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">href</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">geturl</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>  <span class="c1"># as e:</span>
            <span class="c1"># print(&#39;fails on props called by init as they dont exist yet&#39;)</span>
            <span class="c1"># print(e)</span>
            <span class="k">pass</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>  <span class="c1"># TODO - relative to</span>
        <span class="sd">&quot;&quot;&quot;URL</span>

<span class="sd">        builds a url</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str): a url</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlsplit</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">href</span> <span class="o">=</span> <span class="n">url</span>  <span class="c1"># self.url.geturl()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">scheme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hostname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">hostname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">port</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">hostname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pathname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">query</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_searchParams</span> <span class="o">=</span> <span class="n">URLSearchParams</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">searchParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_searchParams</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">href</span><span class="p">)</span>

    <span class="c1"># def toJson</span>

    <span class="c1"># @property</span>
    <span class="c1"># def href(self):</span>
    <span class="c1"># TODO - check js vs tag. does js version remove query?. if so detect self.</span>
    <span class="c1">#     return self.href</span>

    <span class="c1"># @href.setter</span>
    <span class="c1"># def href(self, href:str):</span>
    <span class="c1">#     self.url = href</span>
    <span class="c1">#     self.href = href</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">protocol</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__protocol</span>

    <span class="nd">@protocol</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">protocol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__protocol</span> <span class="o">=</span> <span class="n">p</span>
        <span class="c1"># if self.ready : self.__update__() # TODO - this instead of silent err?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__update__</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hostname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__hostname</span>

    <span class="nd">@hostname</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">hostname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">h</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="s2">&quot;:&quot;</span> <span class="ow">in</span> <span class="n">h</span><span class="p">:</span>
            <span class="n">h</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__hostname</span> <span class="o">=</span> <span class="n">h</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__update__</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">port</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__port</span>

    <span class="nd">@port</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">port</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__port</span> <span class="o">=</span> <span class="n">p</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__update__</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">host</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hostname</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hostname</span>

    <span class="nd">@host</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">host</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">h</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span>
        <span class="k">if</span> <span class="s2">&quot;:&quot;</span> <span class="ow">in</span> <span class="n">h</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">h</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__host</span> <span class="o">=</span> <span class="n">h</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hostname</span> <span class="o">=</span> <span class="n">h</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="n">p</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__update__</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pathname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__pathname</span>

    <span class="nd">@pathname</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">pathname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__pathname</span> <span class="o">=</span> <span class="n">p</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__update__</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot; hash Sets or returns the anchor part (#) of a URL &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;#&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">href</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">href</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1"># return &#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__hash</span>

    <span class="nd">@hash</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__hash</span> <span class="o">=</span> <span class="n">h</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__update__</span><span class="p">()</span>

    <span class="c1"># @property</span>
    <span class="c1"># def origin(self):</span>
        <span class="sd">&#39;&#39;&#39;# origin    Returns the protocol, hostname and port number of a URL Location&#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">href</span><span class="p">)</span></div>

    <span class="c1"># NOTE - node -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --</span>
    <span class="c1"># @staticmethod</span>
    <span class="c1"># def domainToASCII(domain: str):</span>
    <span class="c1">#     &quot;&quot;&quot;[It returns the Punycode ASCII serialization of the domain.</span>
    <span class="c1">#     If domain is an invalid domain, the empty string is returned.]</span>

    <span class="c1">#     Args:</span>
    <span class="c1">#         domain (str): [description]</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     pass</span>

    <span class="c1"># @staticmethod</span>
    <span class="c1"># def domainToUnicode(domain: str):</span>
    <span class="c1">#     &quot;&quot;&quot;[returns the Unicode serialization of the domain.</span>
    <span class="c1">#     If the domain is invalid, the empty string is returned]</span>

    <span class="c1">#     Args:</span>
    <span class="c1">#         domain (str): [description]</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     pass</span>

    <span class="c1"># @staticmethod</span>
    <span class="c1"># def fileURLToPath(url: str):</span>
    <span class="c1">#     &quot;&quot;&quot;[summary]</span>

    <span class="c1">#     Args:</span>
    <span class="c1">#         url (str): [description]</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     pass</span>

    <span class="c1"># @staticmethod</span>
    <span class="c1"># def format(URL, options):</span>
    <span class="c1">#     &quot;&quot;&quot;[summary]</span>

    <span class="c1">#     Args:</span>
    <span class="c1">#         URL ([type]): [description]</span>
    <span class="c1">#         options ([type]): [description]</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     pass</span>

    <span class="c1"># @staticmethod</span>
    <span class="c1"># def pathToFileURL(path: str):</span>
    <span class="c1">#     &quot;&quot;&quot;[summary]</span>

    <span class="c1">#     Args:</span>
    <span class="c1">#         path (str): [description]</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     pass</span>

    <span class="c1"># @staticmethod</span>
    <span class="c1"># def urlToHttpOptions(url: str):</span>
    <span class="c1">#     &quot;&quot;&quot;[summary]</span>

    <span class="c1">#     Args:</span>
    <span class="c1">#         url (str): [description]</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     pass</span>


<div class="viewcode-block" id="URLSearchParams"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.URLSearchParams">[docs]</a><span class="k">class</span> <span class="nc">URLSearchParams</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;[utility methods to work with the query string of a URL]</span>

<span class="sd">        created with help of https://6b.eleuther.ai/</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramString</span><span class="p">):</span>  <span class="c1"># , **paramsObj):</span>
        <span class="sd">&quot;&quot;&quot;[Returns a URLSearchParams object instance.]</span>

<span class="sd">        Args:</span>
<span class="sd">            paramString ([type]): [ i.e. q=URLUtils.searchParams&amp;topic=api]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO - escape</span>
        <span class="c1"># import ast</span>
        <span class="c1"># TODO - dont think i can do this cant urls params have duplicate keys?</span>
        <span class="c1"># self.params = ast.literal_eval(paramString)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">paramString</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">paramString</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;?&#39;</span><span class="p">):</span>
                <span class="n">paramString</span> <span class="o">=</span> <span class="n">paramString</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">paramString</span><span class="p">)]</span>

            <span class="kn">import</span> <span class="nn">urllib</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">parse_qs</span><span class="p">(</span><span class="n">paramString</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">paramString</span><span class="p">,</span> <span class="s1">&#39;__iter__&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">paramString</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">sublist</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">paramString</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="n">key</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">paramString</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Malformed paramString.  Must be a string or a dict with dict like items. Got: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">paramString</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># dir(self.params.items()):</span>
            <span class="c1"># if not attr.startswith(&quot;__&quot;):</span>
            <span class="k">yield</span> <span class="n">attr</span>

<div class="viewcode-block" id="URLSearchParams.append"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.URLSearchParams.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Appends a specified key/value pair as a new search parameter &quot;&quot;&quot;</span>
        <span class="c1"># TODO - ordereddict?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># [key]=value</span></div>

<div class="viewcode-block" id="URLSearchParams.delete"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.URLSearchParams.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Deletes the given search parameter, and its associated value, from the list of all search parameters. &quot;&quot;&quot;</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span></div>

<div class="viewcode-block" id="URLSearchParams.has"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.URLSearchParams.has">[docs]</a>    <span class="k">def</span> <span class="nf">has</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a Boolean indicating if such a given parameter exists. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span></div>

<div class="viewcode-block" id="URLSearchParams.entries"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.URLSearchParams.entries">[docs]</a>    <span class="k">def</span> <span class="nf">entries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an iterator allowing iteration through all key/value pairs contained in this object. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">items</span><span class="p">()</span></div>

<div class="viewcode-block" id="URLSearchParams.forEach"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.URLSearchParams.forEach">[docs]</a>    <span class="k">def</span> <span class="nf">forEach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Allows iteration through all values contained in this object via a callback function. &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">func</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="URLSearchParams.keys"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.URLSearchParams.keys">[docs]</a>    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an iterator allowing iteration through all keys of the key/value pairs contained in this object. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span></div>

<div class="viewcode-block" id="URLSearchParams.get"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.URLSearchParams.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the first value associated with the given search parameter. &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="URLSearchParams.sort"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.URLSearchParams.sort">[docs]</a>    <span class="k">def</span> <span class="nf">sort</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sorts all key/value pairs, if any, by their keys. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span></div>

<div class="viewcode-block" id="URLSearchParams.values"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.URLSearchParams.values">[docs]</a>    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an iterator allowing iteration through all values of the key/value pairs contained in this object. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">values</span><span class="p">()</span></div>

<div class="viewcode-block" id="URLSearchParams.toString"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.URLSearchParams.toString">[docs]</a>    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a string containing a query string suitable for use in a URL. &quot;&quot;&quot;</span>
        <span class="c1"># return &#39;&amp;&#39;.join([str(x) for x in self.params])</span>
        <span class="k">return</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlencode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">doseq</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
        <span class="c1"># return str(self.params)</span>

<div class="viewcode-block" id="URLSearchParams.set"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.URLSearchParams.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the value associated with a given search parameter to the given value.</span>
<span class="sd">        If there are several values, the others are deleted. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="URLSearchParams.getAll"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.URLSearchParams.getAll">[docs]</a>    <span class="k">def</span> <span class="nf">getAll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns all the values associated with a given search parameter. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlencode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">doseq</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<span class="k">def</span> <span class="nf">ToInt32</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">v</span> <span class="o">&gt;&gt;</span> <span class="mi">0</span>


<span class="k">def</span> <span class="nf">ToUint32</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">v</span> <span class="o">&gt;&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">if</span> <span class="n">v</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="k">else</span> <span class="p">((</span><span class="n">v</span> <span class="o">+</span> <span class="mh">0x100000000</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">0</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ArrayBuffer</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
        <span class="c1"># self.length = length</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">length</span><span class="p">)</span>
        <span class="c1"># self.byteLength = length</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">isView</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">byteLength</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">buffer_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="c1"># return getattr(self.buffer, name)</span>
        <span class="c1"># try on self if not get from buffer</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># return self.length</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># return self.__length</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>

    <span class="c1"># @length.setter</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">slice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">DataView</span><span class="p">(</span><span class="n">ArrayBuffer</span><span class="p">):</span>
<span class="c1">#?? is this right. don&#39;t look lt</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">byteOffset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">byteLength</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">byteLength</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">isView</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="n">buffer</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">=</span> <span class="n">byteOffset</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">byteLength</span> <span class="o">=</span> <span class="n">byteLength</span>

        <span class="k">def</span> <span class="nf">getUint8</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">getUint8</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="n">index</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">getInt8</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">getInt8</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="n">index</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">getUint16</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">littleEndian</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">getUint16</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="n">index</span><span class="p">,</span> <span class="n">littleEndian</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">getInt16</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">littleEndian</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">getInt16</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="n">index</span><span class="p">,</span> <span class="n">littleEndian</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">getUint32</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">littleEndian</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">getUint32</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="n">index</span><span class="p">,</span> <span class="n">littleEndian</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">getInt32</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">littleEndian</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">getInt32</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="n">index</span><span class="p">,</span> <span class="n">littleEndian</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">getFloat32</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">littleEndian</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">getFloat32</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="n">index</span><span class="p">,</span> <span class="n">littleEndian</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">getFloat64</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">littleEndian</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">getFloat64</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="n">index</span><span class="p">,</span> <span class="n">littleEndian</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">setUint8</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">setUint8</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">setInt8</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">setInt8</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">setUint16</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">littleEndian</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">setUint16</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">littleEndian</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">setInt16</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">littleEndian</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">setInt16</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">littleEndian</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TypedArray</span><span class="p">:</span>
<span class="c1"># class Int8Array:</span>

    <span class="n">BYTES_PER_ELEMENT</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[ creates a new Int8Array</span>
<span class="sd">            can take the following forms:</span>
<span class="sd">                Int8Array()</span>
<span class="sd">                Int8Array(length)</span>
<span class="sd">                Int8Array(typedArray)</span>
<span class="sd">                Int8Array(object)</span>
<span class="sd">                Int8Array(buffer)</span>
<span class="sd">                Int8Array(buffer, byteOffset)</span>
<span class="sd">                Int8Array(buffer, byteOffset, length)</span>
<span class="sd">        ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Int8Array&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># self.BYTES_PER_ELEMENT = Int8Array.BYTES_PER_ELEMENT</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">byteLength</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">isView</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">return</span>

        <span class="n">arg</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># print(arg)</span>
        <span class="c1"># print(type(arg))</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="p">(</span><span class="n">Int8Array</span><span class="p">,</span> <span class="n">ArrayBuffer</span><span class="p">)):</span>
            <span class="c1"># self.buffer = arg.buffer</span>
            <span class="c1"># self.byteLength = arg.byteLength</span>
            <span class="c1"># self.length = arg.length</span>
            <span class="c1"># self.isView = arg.isView</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="n">arg</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">=</span> <span class="n">ToUint32</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span><span class="p">)</span>
            <span class="c1"># if (this.byteOffset &gt; this.buffer.byteLength) {</span>
            <span class="c1"># throw new RangeError(&quot;byteOffset out of range&quot;);</span>
            <span class="c1"># }</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">byteLength</span><span class="p">:</span>
                <span class="c1"># raise RangeError(&quot;byteOffset out of range&quot;)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;byteOffset out of range&quot;</span><span class="p">)</span>

            <span class="c1"># if (this.byteOffset % this.BYTES_PER_ELEMENT) {</span>
            <span class="c1"># // The given byteOffset must be a multiple of the element size of the specific type, otherwise an exception is raised.</span>
            <span class="c1"># throw new RangeError(&quot;ArrayBuffer length minus the byteOffset is not a multiple of the element size.&quot;);</span>
            <span class="c1"># }</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span><span class="p">:</span>
                <span class="c1"># raise RangeError(&quot;ArrayBuffer length minus the byteOffset is not a multiple of the element size.&quot;)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;ArrayBuffer length minus the byteOffset is not a multiple of the element size.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">byteLength</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">byteLength</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span>

                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byteLength</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span><span class="p">):</span>
                    <span class="c1"># raise RangeError(&quot;length of buffer minus byteOffset not a multiple of the element size&quot;);</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;length of buffer minus byteOffset not a multiple of the element size&quot;</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">byteLength</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">ToUint32</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">byteLength</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span>
            <span class="k">if</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">byteLength</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">byteLength</span><span class="p">):</span>
                <span class="c1"># raise RangeError(&quot;byteOffset and length reference an area beyond the end of the buffer&quot;);</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;byteOffset and length reference an area beyond the end of the buffer&quot;</span><span class="p">)</span>

            <span class="k">return</span>
        <span class="c1"># elif isinstance(arg, array.array):</span>
        <span class="c1">#     print(&#39;c!!!!&#39;)</span>
        <span class="c1">#     self.buffer = arg</span>
        <span class="c1">#     self.byteLength = len(arg)</span>
        <span class="c1">#     self.length = len(arg)</span>
        <span class="c1">#     self.isView = False</span>
        <span class="c1">#     if len(args) == 2:</span>
        <span class="c1">#         self.byteOffset = args[1]</span>
        <span class="c1">#     if len(args) == 3:</span>
        <span class="c1">#         self.byteOffset = args[1]</span>
        <span class="c1">#         self.length = args[2]</span>
        <span class="c1">#     return</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">byteLength</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="c1"># self.length = 0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">isView</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># self.buffer = array.array(&#39;B&#39;, [0] * arg)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a!&#39;</span><span class="p">)</span>
            <span class="c1"># self.buffer = ArrayBuffer(arg)</span>
            <span class="c1"># self.byteLength = arg</span>
            <span class="c1"># self.length = arg</span>
            <span class="c1"># self.isView = False</span>

            <span class="c1"># // Constructor(unsigned long length)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">ToInt32</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;ArrayBufferView size is not a small enough positive integer&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">byteLength</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="n">ArrayBuffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byteLength</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">return</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>

            <span class="c1"># print(&#39;bb!&#39;, arg)</span>
            <span class="c1"># self.buffer = array.array(&#39;B&#39;, arg)</span>
            <span class="c1"># self.byteLength = len(arg)</span>
            <span class="c1"># self.length = len(arg)</span>
            <span class="c1"># self.isView = False</span>

            <span class="c1"># // Constructor(sequence&lt;type&gt; array)</span>
            <span class="n">sequence</span> <span class="o">=</span> <span class="n">arg</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">ToUint32</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sequence</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">byteLength</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="n">ArrayBuffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byteLength</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">sequence</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">Number</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>

            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Invalid argument type&quot;</span><span class="p">)</span>

    <span class="c1"># @property</span>
    <span class="c1"># def length(self):</span>
    <span class="c1">#     return self.buffer.buffer_info()[1]</span>

    <span class="c1"># @length.setter</span>
    <span class="c1"># def length(self, value):</span>
    <span class="c1">#     self.buffer.length = value</span>

    <span class="nd">@property</span>  <span class="c1"># TODO - test try this for sneaky way of binding to exsiting array methods?</span>
    <span class="k">def</span> <span class="nf">args</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">of</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="c1"># Creates a new Int8Array with a variable number of arguments</span>
        <span class="k">return</span> <span class="n">Int8Array</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">from_</span><span class="p">(</span><span class="n">thing</span><span class="p">):</span>
        <span class="c1"># Creates a new Int8Array from an array-like or iterable object</span>
        <span class="k">return</span> <span class="n">Int8Array</span><span class="p">(</span><span class="n">thing</span><span class="p">)</span>

    <span class="c1"># def __getitem__(self, index):</span>
    <span class="c1">#     return self.buffer[index]</span>

    <span class="c1"># def __setitem__(self, index, value):</span>
    <span class="c1">#     self.buffer[index] = value</span>

    <span class="c1"># // getter type (unsigned long index);</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">SyntaxError</span><span class="p">(</span><span class="s2">&quot;Not enough arguments&quot;</span><span class="p">)</span>

        <span class="n">index</span> <span class="o">=</span> <span class="n">ToUint32</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">undefined</span>

        <span class="n">b</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">o</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="n">index</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span><span class="p">):</span>
            <span class="n">b</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="n">o</span><span class="p">])</span>
            <span class="n">o</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

    <span class="c1"># // NONSTANDARD: convenience alias for getter: type get(unsigned long index);</span>
    <span class="n">get</span> <span class="o">=</span> <span class="fm">__getitem__</span>

    <span class="c1"># // setter void (unsigned long index, type value);</span>
    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># print(&#39;set&#39;, index, value)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">SyntaxError</span><span class="p">(</span><span class="s2">&quot;Not enough arguments&quot;</span><span class="p">)</span>

        <span class="n">index</span> <span class="o">=</span> <span class="n">ToUint32</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">undefined</span>

        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pack</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="c1"># print(b)</span>
        <span class="c1"># print(  self._pack(10) )</span>
        <span class="c1"># print(  self._pack(20) )</span>
        <span class="c1"># print(  self._pack(30) )</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">o</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="n">index</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="n">o</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

    <span class="c1"># // void set(TypedArray array, optional unsigned long offset);</span>
    <span class="c1"># // void set(sequence&lt;type&gt; array, optional unsigned long offset);</span>
    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">SyntaxError</span><span class="p">(</span><span class="s2">&quot;Not enough arguments&quot;</span><span class="p">)</span>

        <span class="c1"># arr = None</span>
        <span class="c1"># sequence = None</span>
        <span class="c1"># offset = None</span>
        <span class="c1"># nlen = None</span>
        <span class="c1"># i = None</span>
        <span class="c1"># s = None</span>
        <span class="c1"># d = None</span>
        <span class="c1"># byteOffset = None</span>
        <span class="c1"># byteLength = None</span>
        <span class="c1"># tmp = None</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span> <span class="ow">and</span> <span class="n">index</span> <span class="o">==</span> <span class="bp">self</span><span class="p">):</span>
        <span class="c1">#     // void set(TypedArray arr, optional unsigned long offset)</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">index</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="n">ToUint32</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">offset</span> <span class="o">+</span> <span class="n">arr</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">):</span>
                <span class="c1"># raise RangeError(&quot;Offset plus length of array is out of range&quot;)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Offset plus length of array is out of range&quot;</span><span class="p">)</span>

            <span class="n">byteOffset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="n">offset</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span>
            <span class="n">byteLength</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">buffer</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">):</span>
                <span class="n">tmp</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">byteOffset</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">byteLength</span><span class="p">):</span>
                    <span class="n">tmp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="n">s</span><span class="p">]</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">byteOffset</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">byteLength</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="n">d</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">byteOffset</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">byteOffset</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">byteLength</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="n">d</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="n">s</span><span class="p">]</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span> <span class="ow">and</span> <span class="n">index</span> <span class="o">!=</span> <span class="bp">self</span><span class="p">):</span>
        <span class="c1">#     // void set(sequence&lt;type&gt; arr, optional unsigned long offset);</span>
            <span class="n">sequence</span> <span class="o">=</span> <span class="n">index</span>
            <span class="n">nlen</span> <span class="o">=</span> <span class="n">ToUint32</span><span class="p">(</span><span class="n">sequence</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="n">ToUint32</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">offset</span> <span class="o">+</span> <span class="n">nlen</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">):</span>
            <span class="c1">#   raise RangeError(&quot;Offset plus length of arr is out of range&quot;)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Offset plus length of arr is out of range&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">sequence</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_setter</span><span class="p">(</span><span class="n">offset</span> <span class="o">+</span> <span class="n">i</span><span class="p">,</span> <span class="n">Number</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Unexpected argument type(s)&quot;</span><span class="p">)</span>

    <span class="c1"># // TypedArray subarray(long begin, optional long end);</span>

    <span class="k">def</span> <span class="nf">subarray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">clamp</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">):</span>
            <span class="n">m1</span> <span class="o">=</span> <span class="nb">max</span> <span class="k">if</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="nb">max</span> <span class="k">else</span> <span class="n">v</span>
            <span class="k">return</span> <span class="nb">min</span> <span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="nb">min</span> <span class="k">else</span> <span class="n">m1</span>

        <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span>

        <span class="n">start</span> <span class="o">=</span> <span class="n">ToInt32</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">ToInt32</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">start</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">+</span> <span class="n">start</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">end</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">+</span> <span class="n">end</span>

        <span class="n">start</span> <span class="o">=</span> <span class="n">clamp</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">clamp</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>

        <span class="n">nlen</span> <span class="o">=</span> <span class="n">end</span> <span class="o">-</span> <span class="n">start</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">nlen</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">nlen</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">byteOffset</span> <span class="o">+</span> <span class="n">start</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span><span class="p">,</span> <span class="n">nlen</span><span class="p">)</span>


<div class="viewcode-block" id="as_signed"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.as_signed">[docs]</a><span class="k">def</span> <span class="nf">as_signed</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">bits</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Converts an unsigned integer to a signed integer. &quot;&quot;&quot;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">32</span> <span class="o">-</span> <span class="n">bits</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">s</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">value</span> <span class="o">&amp;</span> <span class="n">mask</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">value</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&lt;&lt;</span> <span class="n">s</span><span class="p">))</span></div>


<span class="k">def</span> <span class="nf">as_unsigned</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">bits</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">32</span> <span class="o">-</span> <span class="n">bits</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">s</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">value</span> <span class="o">&amp;</span> <span class="n">mask</span>


<span class="k">class</span> <span class="nc">__byteutils__</span><span class="p">():</span>

    <span class="k">def</span> <span class="nf">packI8</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">n</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">]</span>
        <span class="c1"># return struct.pack(&#39;B&#39;, n)</span>

    <span class="k">def</span> <span class="nf">unpackI8</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">as_signed</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">8</span><span class="p">)</span>
        <span class="c1"># return struct.unpack(&#39;B&#39;, b)[0]</span>

    <span class="k">def</span> <span class="nf">packU8</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">n</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">]</span>
        <span class="c1"># return struct.pack(&#39;B&#39;, n)</span>

    <span class="k">def</span> <span class="nf">unpackU8</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">as_unsigned</span><span class="p">(</span><span class="nb">bytes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">8</span><span class="p">)</span>
        <span class="c1"># return struct.unpack(&#39;B&#39;, bytes)[0]</span>

    <span class="k">def</span> <span class="nf">packU8Clamped</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">Number</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
        <span class="c1"># return [n &lt; 0 ? 0 : n &gt; 0xff ? 0xff : n &amp; 0xff]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">n</span> <span class="o">&gt;</span> <span class="mh">0xff</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="mh">0xff</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">n</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">]</span>
        <span class="c1"># return struct.pack(&#39;B&#39;, n)</span>

    <span class="k">def</span> <span class="nf">packI16</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">,</span> <span class="n">n</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">]</span>
        <span class="c1"># return struct.pack(&#39;&gt;H&#39;, n)</span>

    <span class="k">def</span> <span class="nf">unpackI16</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">as_signed</span><span class="p">(</span><span class="nb">bytes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">16</span><span class="p">)</span>
        <span class="c1"># return struct.unpack(&#39;&gt;H&#39;, bytes)[0]</span>

    <span class="k">def</span> <span class="nf">packU16</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">,</span> <span class="n">n</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">]</span>
        <span class="c1"># return struct.pack(&#39;&gt;H&#39;, n)</span>

    <span class="k">def</span> <span class="nf">unpackU16</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">as_unsigned</span><span class="p">(</span><span class="nb">bytes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">16</span><span class="p">)</span>
        <span class="c1"># return struct.unpack(&#39;&gt;H&#39;, bytes)[0]</span>

    <span class="k">def</span> <span class="nf">packI32</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">24</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">,</span> <span class="p">(</span><span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">,</span> <span class="p">(</span><span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">,</span> <span class="n">n</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">]</span>
        <span class="c1"># return struct.pack(&#39;&gt;I&#39;, n)</span>

    <span class="k">def</span> <span class="nf">unpackI32</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">as_signed</span><span class="p">(</span><span class="nb">bytes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mi">32</span><span class="p">)</span>
        <span class="c1"># return struct.unpack(&#39;&gt;I&#39;, bytes)[0]</span>

    <span class="k">def</span> <span class="nf">packU32</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">24</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">,</span> <span class="p">(</span><span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">,</span> <span class="p">(</span><span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">,</span> <span class="n">n</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">]</span>
        <span class="c1"># return struct.pack(&#39;&gt;I&#39;, n)</span>

    <span class="k">def</span> <span class="nf">unpackU32</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">as_unsigned</span><span class="p">(</span><span class="nb">bytes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mi">32</span><span class="p">)</span>
        <span class="c1"># return struct.unpack(&#39;&gt;I&#39;, bytes)[0]</span>

    <span class="k">def</span> <span class="nf">packIEEE754</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">ebits</span><span class="p">,</span> <span class="n">fbits</span><span class="p">):</span>

        <span class="n">bias</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">ebits</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="o">-</span> <span class="mi">1</span>

        <span class="k">def</span> <span class="nf">roundToEven</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">w</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="n">w</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">w</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">w</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="c1"># return w % 2 ? w + 1 : w</span>
            <span class="k">return</span> <span class="n">w</span> <span class="k">if</span> <span class="p">(</span><span class="n">w</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="k">else</span> <span class="n">w</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="c1"># Compute sign, exponent, fraction</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">v</span> <span class="o">!=</span> <span class="n">v</span><span class="p">):</span>
            <span class="c1"># NaN</span>
            <span class="c1"># http://dev.w3.org/2006/webapi/WebIDL/#es-type-mapping</span>
            <span class="n">e</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">ebits</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">fbits</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">v</span> <span class="o">==</span> <span class="n">Global</span><span class="o">.</span><span class="n">Infinity</span> <span class="ow">or</span> <span class="n">v</span> <span class="o">==</span> <span class="o">-</span><span class="n">Global</span><span class="o">.</span><span class="n">Infinity</span><span class="p">):</span>
            <span class="n">e</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">ebits</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="n">f</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="c1"># s = (v &lt; 0) ? 1 : 0</span>
            <span class="n">s</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="p">(</span><span class="n">v</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">v</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">e</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">f</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">s</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">v</span> <span class="o">==</span> <span class="o">-</span><span class="n">Global</span><span class="o">.</span><span class="n">Infinity</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="mi">0</span>
            <span class="n">v</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">v</span> <span class="o">&gt;=</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">bias</span><span class="p">)):</span>

                <span class="n">e</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">Math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">Math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">/</span> <span class="n">Math</span><span class="o">.</span><span class="n">LN2</span><span class="p">),</span> <span class="mi">1023</span><span class="p">)</span>
                <span class="n">f</span> <span class="o">=</span> <span class="n">roundToEven</span><span class="p">(</span><span class="n">v</span> <span class="o">/</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="o">*</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">fbits</span><span class="p">))</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">f</span> <span class="o">/</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">fbits</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">):</span>
                    <span class="n">e</span> <span class="o">=</span> <span class="n">e</span> <span class="o">+</span> <span class="mi">1</span>
                    <span class="n">f</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">e</span> <span class="o">&gt;</span> <span class="n">bias</span><span class="p">):</span>
                    <span class="c1"># Overflow</span>
                    <span class="n">e</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">ebits</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                    <span class="n">f</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Normalized</span>
                    <span class="n">e</span> <span class="o">=</span> <span class="n">e</span> <span class="o">+</span> <span class="n">bias</span>
                    <span class="n">f</span> <span class="o">=</span> <span class="n">f</span> <span class="o">-</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">fbits</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Denormalized</span>
                <span class="n">e</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">f</span> <span class="o">=</span> <span class="n">roundToEven</span><span class="p">(</span><span class="n">v</span> <span class="o">/</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">bias</span> <span class="o">-</span> <span class="n">fbits</span><span class="p">))</span>

        <span class="c1"># Pack sign, exponent, fraction</span>
        <span class="n">bits</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">fbits</span><span class="p">):</span>
            <span class="n">bits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">f</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ebits</span><span class="p">):</span>
            <span class="n">bits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">e</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">e</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">bits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="n">bits</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="n">mystr</span> <span class="o">=</span> <span class="n">bits</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="c1"># Bits to bytes</span>
        <span class="n">b</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">mystr</span><span class="o">.</span><span class="n">length</span><span class="p">):</span>
            <span class="n">b</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">parseInt</span><span class="p">(</span><span class="n">mystr</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="mi">2</span><span class="p">))</span>
            <span class="n">mystr</span> <span class="o">=</span> <span class="n">mystr</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">unpackIEEE754</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">ebits</span><span class="p">,</span> <span class="n">fbits</span><span class="p">):</span>

        <span class="c1"># Bytes to bits</span>
        <span class="n">bits</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">bytes</span><span class="p">)):</span>
            <span class="n">b</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">):</span>
                <span class="n">bits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span> <span class="k">if</span> <span class="n">b</span> <span class="o">%</span> <span class="mi">2</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">b</span> <span class="o">=</span> <span class="n">b</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span>

        <span class="n">bits</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="n">mystr</span> <span class="o">=</span> <span class="n">bits</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="c1"># Unpack sign, exponent, fraction</span>
        <span class="n">bias</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">ebits</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="c1"># s = parseInt(str.substring(0, 1), 2) ? -1 : 1</span>
        <span class="n">s</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="p">(</span><span class="n">mystr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="mi">1</span>

        <span class="n">e</span> <span class="o">=</span> <span class="n">parseInt</span><span class="p">(</span><span class="n">mystr</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">ebits</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">parseInt</span><span class="p">(</span><span class="n">mystr</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">ebits</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

        <span class="c1"># // Produce number</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">e</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">ebits</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="c1"># return f !== 0 ? NaN : s * Infinity</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">Global</span><span class="o">.</span><span class="n">NaN</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">s</span> <span class="o">*</span> <span class="n">Global</span><span class="o">.</span><span class="n">InfInfinity</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">e</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
            <span class="c1"># Normalized</span>
            <span class="k">return</span> <span class="n">s</span> <span class="o">*</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">e</span> <span class="o">-</span> <span class="n">bias</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">f</span> <span class="o">/</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">fbits</span><span class="p">))</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">f</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
            <span class="c1"># Denormalized</span>
            <span class="k">return</span> <span class="n">s</span> <span class="o">*</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="p">(</span><span class="n">bias</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">f</span> <span class="o">/</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">fbits</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">0</span> <span class="k">if</span> <span class="n">s</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">unpackF64</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">unpackIEEE754</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">52</span><span class="p">)</span>
        <span class="c1"># return struct.unpack(&#39;&gt;d&#39;, b)[0]</span>

    <span class="k">def</span> <span class="nf">packF64</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">packIEEE754</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">52</span><span class="p">)</span>
        <span class="c1"># return struct.pack(&#39;&gt;d&#39;, v)</span>

    <span class="k">def</span> <span class="nf">unpackF32</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">unpackIEEE754</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">23</span><span class="p">)</span>
        <span class="c1"># return struct.unpack(&#39;&gt;f&#39;, b)[0]</span>

    <span class="k">def</span> <span class="nf">packF32</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">packIEEE754</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">23</span><span class="p">)</span>
        <span class="c1"># return struct.pack(&#39;&gt;f&#39;, v)</span>


<span class="n">Int8Array</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;Int8Array&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">TypedArray</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Int8Array&#39;</span><span class="p">,</span> <span class="s1">&#39;_pack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">packI8</span><span class="p">,</span> <span class="s1">&#39;_unpack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">unpackI8</span><span class="p">})</span>
<span class="n">Int8Array</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">Uint8Array</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;Uint8Array&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">TypedArray</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Uint8Array&#39;</span><span class="p">,</span> <span class="s1">&#39;_pack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">packU8</span><span class="p">,</span> <span class="s1">&#39;_unpack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">unpackU8</span><span class="p">})</span>
<span class="n">Uint8Array</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">Uint8ClampedArray</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;Uint8ClampedArray&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">TypedArray</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Uint8ClampedArray&#39;</span><span class="p">,</span> <span class="s1">&#39;_pack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">packU8Clamped</span><span class="p">,</span> <span class="s1">&#39;_unpack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">unpackU8</span><span class="p">})</span>
<span class="n">Uint8ClampedArray</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">Int16Array</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;Int16Array&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">TypedArray</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Int16Array&#39;</span><span class="p">,</span> <span class="s1">&#39;_pack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">packI16</span><span class="p">,</span> <span class="s1">&#39;_unpack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">unpackI16</span><span class="p">})</span>
<span class="n">Int16Array</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">Uint16Array</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;Uint16Array&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">TypedArray</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Uint16Array&#39;</span><span class="p">,</span> <span class="s1">&#39;_pack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">packU16</span><span class="p">,</span> <span class="s1">&#39;_unpack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">unpackU16</span><span class="p">})</span>
<span class="n">Uint16Array</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">Int32Array</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;Int32Array&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">TypedArray</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Int32Array&#39;</span><span class="p">,</span> <span class="s1">&#39;_pack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">packI32</span><span class="p">,</span> <span class="s1">&#39;_unpack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">unpackI32</span><span class="p">})</span>
<span class="n">Int32Array</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span> <span class="o">=</span> <span class="mi">4</span>

<span class="n">Uint32Array</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;Uint32Array&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">TypedArray</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Uint32Array&#39;</span><span class="p">,</span> <span class="s1">&#39;_pack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">packU32</span><span class="p">,</span> <span class="s1">&#39;_unpack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">unpackU32</span><span class="p">})</span>
<span class="n">Uint32Array</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span> <span class="o">=</span> <span class="mi">4</span>

<span class="n">Float32Array</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;Float32Array&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">TypedArray</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Float32Array&#39;</span><span class="p">,</span> <span class="s1">&#39;_pack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">packF32</span><span class="p">,</span> <span class="s1">&#39;_unpack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">unpackF32</span><span class="p">})</span>
<span class="n">Float32Array</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span> <span class="o">=</span> <span class="mi">4</span>

<span class="n">Float64Array</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;Float64Array&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">TypedArray</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Float64Array&#39;</span><span class="p">,</span> <span class="s1">&#39;_pack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">packF64</span><span class="p">,</span> <span class="s1">&#39;_unpack&#39;</span><span class="p">:</span> <span class="n">__byteutils__</span><span class="o">.</span><span class="n">unpackF64</span><span class="p">})</span>
<span class="n">Float64Array</span><span class="o">.</span><span class="n">BYTES_PER_ELEMENT</span> <span class="o">=</span> <span class="mi">8</span>

<span class="c1"># BigInt64Array = type(&#39;BigInt64Array&#39;, (TypedArray,), {&#39;name&#39;: &#39;BigInt64Array&#39;, &#39;_pack&#39;: __byteutils__.packI64, &#39;_unpack&#39;: __byteutils__.unpackI64})</span>
<span class="c1"># BigInt64Array.BYTES_PER_ELEMENT = 8</span>

<span class="c1"># BigUint64Array = type(&#39;BigUint64Array&#39;, (TypedArray,), {&#39;name&#39;: &#39;BigUint64Array&#39;, &#39;_pack&#39;: __byteutils__.packU64, &#39;_unpack&#39;: __byteutils__.unpackU64})</span>
<span class="c1"># BigUint64Array.BYTES_PER_ELEMENT = 8</span>


<span class="c1"># TODO - test</span>
<div class="viewcode-block" id="Error"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Error">[docs]</a><span class="k">class</span> <span class="nc">Error</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Raise Errors &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">message</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Error</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></div>
    <span class="c1"># def __str__(self):</span>
    <span class="c1">#     return self.message</span>

<span class="c1"># Error</span>
<span class="c1"># AggregateError</span>
<span class="c1"># EvalError</span>
<span class="c1"># InternalError</span>
<span class="c1"># RangeError</span>
<span class="c1"># ReferenceError</span>
<span class="c1"># SyntaxError</span>
<span class="c1"># TypeError</span>
<span class="c1"># URIError</span>


<span class="c1"># ---- STUBBING OUT SOME NEW ONES TO WORK ON ----</span>

<div class="viewcode-block" id="Reflect"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Reflect">[docs]</a><span class="k">class</span> <span class="nc">Reflect</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Reflect object provides the following static functions which have the same names as the proxy handler methods.</span>
<span class="sd">    Some of these methods are also the same as corresponding methods on Object,</span>
<span class="sd">    although they do have some subtle differences between them.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Reflect.ownKeys"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Reflect.ownKeys">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">ownKeys</span><span class="p">(</span><span class="n">target</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an array of the target object&#39;s own (not inherited) property keys. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">target</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span></div>
        <span class="c1"># return target.__dict__.keys()</span>

<div class="viewcode-block" id="Reflect.apply"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Reflect.apply">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">thisArgument</span><span class="p">,</span> <span class="n">argumentsList</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Calls a target function with arguments as specified by the argumentsList parameter.</span>
<span class="sd">        See also Function.prototype.apply(). &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">target</span><span class="p">(</span><span class="o">*</span><span class="n">argumentsList</span><span class="p">)</span></div>

<div class="viewcode-block" id="Reflect.construct"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Reflect.construct">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">argumentsList</span><span class="p">,</span> <span class="n">newTarget</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; The new operator as a function. Equivalent to calling new target(...argumentsList).</span>
<span class="sd">        Also provides the option to specify a different prototype. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Reflect.defineProperty"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Reflect.defineProperty">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">defineProperty</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">propertyKey</span><span class="p">,</span> <span class="n">attributes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Similar to Object.defineProperty().</span>
<span class="sd">        Returns a Boolean that is true if the property was successfully defined. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Reflect.deleteProperty"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Reflect.deleteProperty">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">deleteProperty</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">propertyKey</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; The delete operator as a function. Equivalent to calling delete target[propertyKey]. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Reflect.get"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Reflect.get">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">propertyKey</span><span class="p">,</span> <span class="n">receiver</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the value of the property.</span>
<span class="sd">        Works like getting a property from an object (target[propertyKey]) as a function. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Reflect.getOwnPropertyDescriptor"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Reflect.getOwnPropertyDescriptor">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getOwnPropertyDescriptor</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">propertyKey</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Similar to Object.getOwnPropertyDescriptor(). Returns a property descriptor of the given property if it exists on the object,  undefined otherwise. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

    <span class="n">getPrototypeOf</span> <span class="o">=</span> <span class="n">Object</span><span class="o">.</span><span class="n">getPrototypeOf</span>
    <span class="c1"># isExtensible = Object.isExtensible</span>

<div class="viewcode-block" id="Reflect.has"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Reflect.has">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">has</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">propertyKey</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a Boolean indicating whether the target has the property.</span>
<span class="sd">        Either as own or inherited. Works like the in operator as a function. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Reflect.preventExtensions"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Reflect.preventExtensions">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">preventExtensions</span><span class="p">(</span><span class="n">target</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Similar to Object.preventExtensions(). Returns a Boolean that is true if the update was successful. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Reflect.set"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Reflect.set">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">propertyKey</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">receiver</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; A function that assigns values to properties. Returns a Boolean that is true if the update was successful. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Reflect.setPrototypeOf"><a class="viewcode-back" href="../../packages/javascript.html#domonic.javascript.Reflect.setPrototypeOf">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">setPrototypeOf</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">prototype</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; A function that sets the prototype of an object. Returns a Boolean that is true if the update was successful. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div></div>


<span class="k">class</span> <span class="nc">Symbol</span><span class="p">():</span>

    <span class="c1"># a global registry for symbols</span>
    <span class="n">registry</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Creates a new Symbol object.</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">symbol</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symbol</span> <span class="o">=</span> <span class="n">symbol</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># self.__class__.registry = self.registry</span>

    <span class="k">def</span> <span class="nf">hasInstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[A method determining if a constructor object recognizes an object as its instance. Used by instanceof.]</span>

<span class="sd">        Args:</span>
<span class="sd">            obj ([type]): [a constructor object]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [True if obj is an instance of this symbol, False otherwise]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">symbol</span> <span class="o">==</span> <span class="n">obj</span><span class="o">.</span><span class="n">symbol</span>

    <span class="k">def</span> <span class="nf">isConcatSpreadable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; A Boolean value indicating if an object should be flattened to its array elements. Used by Array.prototype.concat().&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">iterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; A method returning the default iterator for an object. Used by for...of. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">asyncIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; A method that returns the default AsyncIterator for an object. Used by for await...of. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

    <span class="c1"># A method that matches against a string, also used to determine if an object may be used as a regular expression.</span>
    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; A method that matches the symbol against a string,</span>
<span class="sd">        also used to determine if an object may be used as a regular expression. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="c1"># A method that returns an iterator, that yields matches of the regular expression against a string.</span>
    <span class="c1"># Used by String.prototype.matchAll().</span>
    <span class="c1"># def matchAll(self, obj):</span>
    <span class="c1">#     if isinstance(obj, str):</span>
    <span class="c1">#         return obj == self.symbol</span>
    <span class="c1">#     return False</span>

    <span class="c1"># A method that replaces matched substrings of a string. Used by String.prototype.replace().</span>
    <span class="c1"># def replace(self,</span>

    <span class="c1"># A method that returns the index within a string that matches the regular expression. Used by String.prototype.search().</span>
    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="c1"># A method that splits a string at the indices that match a regular expression. Used by String.prototype.split().</span>
    <span class="k">def</span> <span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="c1"># A constructor function that is used to create derived objects.</span>
    <span class="k">def</span> <span class="nf">species</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="c1"># A method converting an object to a primitive value.</span>
    <span class="k">def</span> <span class="nf">toPrimitive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="c1"># A string value used for the default description of an object. Used by Object.prototype.toString().</span>
    <span class="k">def</span> <span class="nf">toStringTag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="c1"># An object value of whose own and inherited property names are excluded from the with environment bindings of the associated object.</span>
    <span class="k">def</span> <span class="nf">unscopables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="c1"># @staticmethod</span>
    <span class="c1"># def for(key):</span>
    <span class="c1">#     &quot;&quot;&quot; Searches for existing Symbols with the given key and returns it if found.</span>
    <span class="c1">#     Otherwise a new Symbol gets created in the global Symbol registry with key. &quot;&quot;&quot;</span>
    <span class="c1">#     raise NotImplementedError</span>

    <span class="c1"># @staticmethod</span>
    <span class="c1"># def keyFor(sym)</span>
    <span class="c1">#     &quot;&quot;&quot; Retrieves a shared Symbol key from the global Symbol registry for the given Symbol. &quot;&quot;&quot;</span>
    <span class="c1">#     raise NotImplementedError</span>

    <span class="k">def</span> <span class="nf">toSource</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a string containing the source of the Symbol. Overrides the Object.prototype.toSource() method. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a string containing the description of the Symbol.</span>
<span class="sd">        Overrides the Object.prototype.toString() method. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">valueOf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the Symbol. Overrides the Object.prototype.valueOf() method. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>


<span class="sd">&#39;&#39;&#39;</span>

<span class="sd">class Atomics():</span>
<span class="sd">    &quot;&quot;&quot;</span>
<span class="sd">    The Atomics object provides atomic operations as static methods</span>
<span class="sd">    They are used with SharedArrayBuffer and ArrayBuffer objects.</span>

<span class="sd">    When memory is shared, multiple threads can read and write the same data in memory.</span>
<span class="sd">    Atomic operations make sure that predictable values are written and read,</span>
<span class="sd">    that operations are finished before the next operation starts and that operations are not interrupted.</span>

<span class="sd">    Wait and notify</span>
<span class="sd">    The wait() and notify() methods are modeled on Linux futexes (&quot;fast user-space mutex&quot;) and provide ways for waiting</span>
<span class="sd">    until a certain condition becomes true and are typically used as blocking constructs.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="sd">    @staticmethod</span>
<span class="sd">    def add(array, index, value):</span>
<span class="sd">        &quot;&quot;&quot; Adds the provided value to the existing value at the specified index of the array.</span>
<span class="sd">            Returns the old value at that index.&quot;&quot;&quot;</span>
<span class="sd">        return array.add(index, value)</span>

<span class="sd">    def and_(array, index, value):</span>
<span class="sd">        &quot;&quot;&quot; Computes a bitwise AND on the value at the specified index of the array with the provided value.</span>
<span class="sd">        Returns the old value at that index.&quot;&quot;&quot;</span>
<span class="sd">        raise NotImplementedError</span>

<span class="sd">    @staticmethod</span>
<span class="sd">    &quot;&quot;&quot; Stores a value at the specified index of the array, if it equals a value. Returns the old value.&quot;&quot;&quot;</span>
<span class="sd">    def compareExchange(array, index, value):</span>
<span class="sd">        raise NotImplementedError</span>

<span class="sd">    @staticmethod</span>
<span class="sd">    def exchange():</span>
<span class="sd">        &quot;&quot;&quot; Stores a value at the specified index of the array. Returns the old value.&quot;&quot;&quot;</span>
<span class="sd">        raise NotImplementedError</span>

<span class="sd">    @staticmethod</span>
<span class="sd">    def isLockFree(size):</span>
<span class="sd">        &quot;&quot;&quot; An optimization primitive that can be used to determine whether to use locks or atomic operations.</span>
<span class="sd">        Returns true if an atomic operation on arrays of the given element size will be implemented using a hardware atomic operation (as opposed to a lock). Experts only.&quot;&quot;&quot;</span>
<span class="sd">        raise NotImplementedError</span>

<span class="sd">    @staticmethod</span>
<span class="sd">    def load():</span>
<span class="sd">        &quot;&quot;&quot; Returns the value at the specified index of the array.&quot;&quot;&quot;</span>
<span class="sd">        raise NotImplementedError</span>

<span class="sd">    # @staticmethod</span>
<span class="sd">    # &quot;&quot;&quot; Notifies agents that are waiting on the specified index of the array. Returns the number of agents that were notified.&quot;&quot;&quot;</span>
<span class="sd">    # def notify(</span>

<span class="sd">    @staticmethod</span>
<span class="sd">    def or_():</span>
<span class="sd">        &quot;&quot;&quot; Computes a bitwise OR on the value at the specified index of the array with the provided value. Returns the old value at that index.&quot;&quot;&quot;</span>
<span class="sd">        raise NotImplementedError</span>

<span class="sd">    @staticmethod</span>
<span class="sd">    def store():</span>
<span class="sd">        &quot;&quot;&quot; Stores a value at the specified index of the array. Returns the value.&quot;&quot;&quot;</span>
<span class="sd">        raise NotImplementedError</span>
<span class="sd">    @staticmethod</span>
<span class="sd">    def sub():</span>
<span class="sd">        &quot;&quot;&quot; Subtracts a value at the specified index of the array. Returns the old value at that index.&quot;&quot;&quot;</span>
<span class="sd">        raise NotImplementedError</span>
<span class="sd">    @staticmethod</span>
<span class="sd">    def wait():</span>
<span class="sd">        &quot;&quot;&quot; Verifies that the specified index of the array still contains a value and sleeps awaiting or times out.</span>
<span class="sd">        Returns either &quot;ok&quot;, &quot;not-equal&quot;, or &quot;timed-out&quot;. If waiting is not allowed in the calling agent then it throws an Error exception. (Most browsers will not allow wait() on the browser&#39;s main thread.)&quot;&quot;&quot;</span>
<span class="sd">        raise NotImplementedError</span>
<span class="sd">    @staticmethod</span>
<span class="sd">    def xor():</span>
<span class="sd">        &quot;&quot;&quot; Computes a bitwise XOR on the value at the specified index of the array with the provided value.</span>
<span class="sd">        Returns the old value at that index.&quot;&quot;&quot;</span>
<span class="sd">        raise NotImplementedError</span>

<span class="sd">&#39;&#39;&#39;</span>

<span class="c1"># debugger  Stops the execution of JavaScript, and calls (if available) the debugging function  Statements</span>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><span style="font-size: 150px;">𖤐</span>
<h1 class="logo"><a href="https://domonic.readthedocs.io/">domonic</a></h1>
<p>
  <iframe src="https://ghbtns.com/github-btn.html?user=byteface&amp;repo=domonic&amp;type=star&amp;count=true&amp;size=large&amp;v=2" allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>
<p>
  domonic is a library to generate HTML with python 3. There's an evolving DOM API, JavaScript API and many other cool features. Can be used as a fast prototyping tool.
</p>

<h3>Links</h3>
<ul>
  <li><a href="https://pypi.org/project/domonic/">PyPI Releases</a></li>
  <li><a href="https://github.com/byteface/domonic/">Source Code</a></li>
</ul>
<h3><a href="../../index.html">Table of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../packages/html.html">html</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/dom.html">dom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/javascript.html">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/events.html">events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/sitemap.html">sitemap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/dQuery.html">dQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/d3.html">d3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/JSON.html">JSON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/constants.html">constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/terminal.html">terminal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/cmd.html">cmd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/tween.html">tween</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/geom.html">geom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/x3d.html">x3d</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/CDN.html">CDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/decorators.html">decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/components.html">Templates and Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/utils.html">utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/webapi.html">webapi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/style.html">styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/servers.html">🚀 servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/autodocs.html">🤖 autodocs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute.html">Contribute</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, byteface.
      
    </div>

    
    <a href="https://github.com/byteface/domonic" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>